/*! KAMAZ_S1000D4_1_MRO bundle, Copyright (c) 2011-2021 Paragraphics */
var cortona3d=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e){function i(t){function e(){}return e.prototype=t.prototype||t,new e}function n(t,e,i){function n(){}if(t&&(n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass=t),i)for(var o in i)i.hasOwnProperty(o)&&(e.prototype[o]=i[o]);return e}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(i in t?"function"==typeof t[i]&&"function"==typeof e[i]?t[i]=e[i]:t[i]instanceof Object&&e[i]instanceof Object&&e[i]!=={}?o(t[i],e[i]):t[i]=e[i]:t[i]=e[i]);return t}function r(t,e,i){return t+256*e+65536*i}function s(t){return"number"==typeof t?t:"string"==typeof t&&t.match(/^#?([0-9A-F]{6})$/i)?parseInt(RegExp.$1.substr(4,2)+RegExp.$1.substr(2,2)+RegExp.$1.substr(0,2),16):0}function a(t,e,i){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",t),e&&n.setAttribute("async","async"),n.onload=i,document.getElementsByTagName("head")[0].appendChild(n)}function c(t,e){var i=document.createElement("link");i.href=t,i.rel="stylesheet",i.type="text/css",i.onload=e,document.getElementsByTagName("head")[0].appendChild(i)}t.exports={extend:i,defineClass:n,expand:o,RGB:r,fromHTMLColor:s,loadScript:a,loadStyleSheet:c}},function(t,e,i){var n=i(0).defineClass,o=n(null,function(t,e){console.assert("string"==typeof t,"WARNING: C3DControlFactory type not a string."),this.type=t,this.events=e&&e instanceof Array?e:[]},{create:function(t){},destroy:function(t){if(void 0!==t[this.type]){t[this.type].detach();var e=t[this.type].instance;e&&e.parentNode&&e.parentNode.removeChild(e)}},getNextId:function(){for(var t=1;document.getElementById(this.type+t);)t++;return this.type+t}});t.exports=o},function(t,e,i){var n=i(0).defineClass,o=n(null,function(t){this.factory=t,this.instance=null,this.invalid=!1,this.events=[]},{isValid:function(){return!!this.instance&&!this.invalid},attach:function(){return this},detach:function(){return this},trigger:function(t,e,i){var n=!1,o=null;if(i=void 0===i?this.instance:i,e=e||{raw:[],src:null},e instanceof Object&&(e.targetControl=this),"function"==typeof window.Event?o=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):document.createEvent?(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,e)):console.error("ERROR: Browser does not support DOM L3/L4 events specification"),o)try{n=i.dispatchEvent(o)}catch(e){console.error("dispatchEvent('"+t+"') exception: "+e.message)}return n},show:function(){if(this.instance){var t=this.instance.style;t.width=t.height="100%",t.marginLeft=""}return this},hide:function(){if(this.instance){var t=this.instance.style;t.width=t.height="1px",t.marginLeft="-10000px"}return this},load:function(t){return this},unload:function(){return this},version:function(){}});t.exports=o},function(t,e,i){"use strict";function n(t,e){if(1===arguments.length){for(var i=t[0],o=1;o<t.length;o++)i=n(i,t[o]);return i}for(var r in e)if("class"===r){var s=t[r]||[];t[r]=(Array.isArray(s)?s:[s]).concat(e[r]||[])}else if("style"===r){var s=a(t[r]);s=s&&";"!==s[s.length-1]?s+";":s;var c=a(e[r]);c=c&&";"!==c[c.length-1]?c+";":c,t[r]=s+c}else t[r]=e[r];return t}function o(t,e){for(var i,n="",o="",r=Array.isArray(e),a=0;a<t.length;a++)(i=s(t[a]))&&(r&&e[a]&&(i=u(i)),n=n+o+i,o=" ");return n}function r(t){var e="",i="";for(var n in t)n&&t[n]&&h.call(t,n)&&(e=e+i+n,i=" ");return e}function s(t,e){return Array.isArray(t)?o(t,e):t&&"object"==typeof t?r(t):t||""}function a(t){if(!t)return"";if("object"==typeof t){var e="";for(var i in t)h.call(t,i)&&(e=e+i+":"+t[i]+";");return e}return t+""}function c(t,e,i,n){return!1!==e&&null!=e&&(e||"class"!==t&&"style"!==t)?!0===e?" "+(n?t:t+'="'+t+'"'):("function"==typeof e.toJSON&&(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),i||-1===e.indexOf('"'))?(i&&(e=u(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"):""}function l(t,e){var i="";for(var n in t)if(h.call(t,n)){var o=t[n];if("class"===n){o=s(o),i=c(n,o,!1,e)+i;continue}"style"===n&&(o=a(o)),i+=c(n,o,!1,e)}return i}function u(t){var e=""+t,i=p.exec(e);if(!i)return t;var n,o,r,s="";for(n=i.index,o=0;n<e.length;n++){switch(e.charCodeAt(n)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}o!==n&&(s+=e.substring(o,n)),o=n+1,s+=r}return o!==n?s+e.substring(o,n):s}function d(t,e,n,o){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&e||o))throw t.message+=" on line "+n,t;try{o=o||i(21).readFileSync(e,"utf8")}catch(e){d(t,null,n)}var r=3,s=o.split("\n"),a=Math.max(n-r,0),c=Math.min(s.length,n+r),r=s.slice(a,c).map(function(t,e){var i=e+a+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Pug")+":"+n+"\n"+r+"\n\n"+t.message,t}var h=Object.prototype.hasOwnProperty;e.merge=n,e.classes=s,e.style=a,e.attr=c,e.attrs=l;var p=/["&<>]/;e.escape=u,e.rethrow=d},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(t,e,i){var n=i(0).defineClass,o=i(2),r=n(o,function(t,e,i,n,o){r.superClass.call(this,t);var s=!1,a=document.createElement("div");a.innerHTML='<object type="application/x-oleobject" classid="'+i+'"><embed type="'+n+'"></object><div class="cortona3d-plugin-disabled">Plugin "'+n+'" not installed or disabled</div>',a.style.position="absolute",a.style.width=a.style.height="1px",a.style.marginLeft="-10000px",e.appendChild(a);var c=a.firstChild;void 0===c.BackColor&&(c=c.firstChild),void 0===c.BackColor&&(c=a.lastChild,s=!0),e.removeChild(a),c.id=t.getNextId(),c.style.position="absolute",this.invalid=s,this.instance=c,this.events=s?[]:o,this.hide(),e.appendChild(c)},{attach:function(){var t=this.instance,e=this,i=t.getAttribute("id");return this.events.forEach(function(n){var o=i+"_"+n;if("function"!=typeof window[o]&&(window[o]=function(){return e.trigger(n,{raw:Array.prototype.slice.call(arguments),src:window.event})}),"OBJECT"===t.tagName&&!document.getElementById(o)){var r=document.createElement("script");r.htmlFor=t.getAttribute("id"),r.event=n+"()",r.id=o,r.text="return "+o+".apply(this, arguments)";document.getElementsByTagName("head")[0].appendChild(r)}}),this},detach:function(){var t=this.instance,e=t.getAttribute("id");return this.events.forEach(function(i){var n=e+"_"+i;if("function"==typeof window[n]&&delete window[n],"OBJECT"===t.tagName){var o=document.getElementById(n);o&&o.parentNode.removeChild(o)}}),this},load:function(t){return this.isValid()&&(this.instance.src=t),this},unload:function(){return this.isValid()&&(this.instance.src="",this.trigger("OnSceneUnloaded")),this}});t.exports=r},function(t,e,i){t.exports=i(13)},function(t,e,i){var n=i(0).defineClass,o=n(null,function(t){this.handlers=t||{}},{initialize:function(t,e){"function"!=typeof e&&(e=function(){return!0});for(var i=this,n=[],o=t.getElementsByClassName("link"),r=0;r<o.length;r++){var s=o[r].getAttribute("data-link");s&&e(s)?o[r].onclick=function(t){t=t||window.event;for(var e=!1,n=t.target;n&&n.classList&&!e;)e=n.classList.contains("filterHide"),n=n.parentNode;if(!e){var o=this.getAttribute("data-link");"function"==typeof i.handlers[o]?i.handlers[o].call(this):console.error("CommonView."+o+" is undefined")}t.stopPropagation()}:n.push(o[r])}n.forEach(function(t){t.classList.remove("link")})},toggleFormElements:function(t,e,i){["input","button","select"].forEach(function(n){Array.prototype.slice.call(t.getElementsByTagName(n)).forEach(function(t){t[e]=void 0!==i?!!i:!t[e]})})}});t.exports=o},function(t,e,i){var n=i(0).defineClass,o=i(2),r=n(o,function(t,e,i,n){r.superClass.call(this,t);var o=e.insertBefore(document.createElement("iframe"),e.firstChild);o.setAttribute("frameSpacing",0),o.setAttribute("frameBorder",0),o.setAttribute("scrolling","no"),o.setAttribute("id",t.getNextId()),o.style.position="absolute",o.style.visibility="hidden",o.style.left="-10000px",o.style.top="-10000px",o.style.zIndex=1e3;var s=this;o.onload=function(){if(!s.content){var t=o.contentDocument.head,e=o.contentDocument.body;if(e.style.padding=0,e.style.margin=0,e.style.overflow="hidden",n){t.appendChild(o.contentDocument.createElement("style")).innerHTML=n}i&&(e.innerHTML=i),e.onselectstart=function(){return!1},e.oncontextmenu=function(){return!1},s.head=t,s.body=e,s.content=e.firstChild,s.attach()}},this.instance=o,this.hide()},{isLoaded:function(){return!!this.content},attach:function(){return this},detach:function(){return this},show:function(){return this.onresize(),this.instance.style.visibility="visible",this},hide:function(){return this.instance.style.visibility="hidden",this.instance.style.left="-10000px",this.instance.style.top="-10000px",this},onresize:function(t,e){return this.isLoaded()||this.instance.onload(),this.instance.style.height=e||"100%",this.instance.style.width=t||"100%",this.content&&this.content.offsetHeight&&this.content.offsetWidth&&(this.instance.style.height=this.content.offsetHeight+"px",this.instance.style.width=this.content.offsetWidth+"px"),this},setPosition:function(t,e){return this.instance.style.left=t+"px",this.instance.style.top=e+"px",this}});t.exports=r},function(t,e,i){/*!
 * PEP v0.4.3-pre | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */
!function(e,i){t.exports=i()}(0,function(){"use strict";function t(t,e){e=e||Object.create(null);var i=document.createEvent("Event");i.initEvent(t,e.bubbles||!1,e.cancelable||!1);for(var n,o=2;o<l.length;o++)n=l[o],i[n]=e[n]||u[o];i.buttons=e.buttons||0;var r=0;return r=e.pressure&&i.buttons?e.pressure:i.buttons?.5:0,i.x=i.clientX,i.y=i.clientY,i.pointerId=e.pointerId||0,i.width=e.width||0,i.height=e.height||0,i.pressure=r,i.tiltX=e.tiltX||0,i.tiltY=e.tiltY||0,i.pointerType=e.pointerType||"",i.hwTimestamp=e.hwTimestamp||0,i.isPrimary=e.isPrimary||!1,i}function e(){this.array=[],this.size=0}function i(t,e,i,n){this.addCallback=t.bind(n),this.removeCallback=e.bind(n),this.changedCallback=i.bind(n),E&&(this.observer=new E(this.mutationWatcher.bind(this)))}function n(t){return"body /shadow-deep/ "+o(t)}function o(t){return'[touch-action="'+t+'"]'}function r(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}function s(t){if(!g.pointermap.has(t)){var e=new Error("InvalidPointerId");throw e.name="InvalidPointerId",e}}function a(t){if(!t.ownerDocument.contains(t)){var e=new Error("InvalidStateError");throw e.name="InvalidStateError",e}}function c(t){return 0!==g.pointermap.get(t).buttons}var l=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],u=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach,h=d?Map:e;e.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}};var p=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],f=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],m={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},v="undefined"!=typeof SVGElementInstance,g={pointermap:new h,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var i=e,n=i.events;n&&(n.forEach(function(t){i[t]&&(this.eventMap[t]=i[t].bind(i))},this),this.eventSources[t]=i,this.eventSourceList.push(i))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,i=this.eventMap&&this.eventMap[e];i&&i(t),t._handledByPE=!0}},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(e,i){this.captureInfo[i.pointerId]&&(i.relatedTarget=null);var n=new t(e,i);return i.preventDefault&&(n.preventDefault=i.preventDefault),n._target=n._target||i.target,n},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},cloneEvent:function(t){for(var e,i=Object.create(null),n=0;n<p.length;n++)e=p[n],i[e]=t[e]||f[n],!v||"target"!==e&&"relatedTarget"!==e||i[e]instanceof SVGElementInstance&&(i[e]=i[e].correspondingUseElement);return t.preventDefault&&(i.preventDefault=function(){t.preventDefault()}),i},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in m?void 0:e:t._target},propagate:function(t,e,i){for(var n=t.target,o=[];!n.contains(t.relatedTarget)&&n!==document;)o.push(n),n=n.parentNode;i&&o.reverse(),o.forEach(function(i){t.target=i,e.call(this,t)},this)},setCapture:function(e,i){this.captureInfo[e]&&this.releaseCapture(e),this.captureInfo[e]=i;var n=new t("gotpointercapture");n.pointerId=e,this.implicitRelease=this.releaseCapture.bind(this,e),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease),n._target=i,this.asyncDispatchEvent(n)},releaseCapture:function(e){var i=this.captureInfo[e];if(i){var n=new t("lostpointercapture");n.pointerId=e,this.captureInfo[e]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease),n._target=i,this.asyncDispatchEvent(n)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};g.boundHandler=g.eventHandler.bind(g);var _={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var i=t.querySelector("shadow");i&&(e=i.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],i=this.shadow(t);i;)e.push(i),i=this.olderShadow(i);return e},searchRoot:function(t,e,i){if(t){var n,o,r=t.elementFromPoint(e,i);for(o=this.targetingShadow(r);o;){if(n=o.elementFromPoint(e,i)){var s=this.targetingShadow(n);return this.searchRoot(s,e,i)||n}o=this.olderShadow(o)}return r}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,i=t.clientY,n=this.owner(t.target);return n.elementFromPoint(e,i)||(n=document),this.searchRoot(n,e,i)}},y=Array.prototype.forEach.call.bind(Array.prototype.forEach),b=Array.prototype.map.call.bind(Array.prototype.map),T=Array.prototype.slice.call.bind(Array.prototype.slice),w=Array.prototype.filter.call.bind(Array.prototype.filter),E=window.MutationObserver||window.WebKitMutationObserver,C={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};i.prototype={watchSubtree:function(t){this.observer&&_.canTarget(t)&&this.observer.observe(t,C)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){y(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(T(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=b(t,this.findElements,this);return e.push(w(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){if("childList"===t.type){this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this);this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)}else"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var A=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],S="",I=window.PointerEvent||window.MSPointerEvent,F=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,O=g.pointermap,x=[1,4,2,8,16],P=!1;try{P=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var N,V={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){g.listen(t,this.events)},unregister:function(t){g.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,r=0,s=i.length;r<s&&(e=i[r]);r++){var a=Math.abs(n-e.x),c=Math.abs(o-e.y);if(a<=25&&c<=25)return!0}},prepareEvent:function(t){var e=g.cloneEvent(t),i=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),i()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var i=O.get(this.POINTER_ID);0!==e.which&&i?t.buttons=i.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=O.get(this.POINTER_ID),i=this.prepareEvent(t);P||(i.buttons=x[i.button],e&&(i.buttons|=e.buttons),t.buttons=i.buttons),O.set(this.POINTER_ID,t),e&&0!==e.buttons?g.move(i):g.down(i)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);P||this.prepareButtonsForMove(e,t),e.button=-1,O.set(this.POINTER_ID,t),g.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=O.get(this.POINTER_ID),i=this.prepareEvent(t);if(!P){var n=x[i.button];i.buttons=e?e.buttons&~n:0,t.buttons=i.buttons}O.set(this.POINTER_ID,t),i.buttons&=~x[i.button],0===i.buttons?g.up(i):g.move(i)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);P||this.prepareButtonsForMove(e,t),e.button=-1,O.set(this.POINTER_ID,t),g.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);P||this.prepareButtonsForMove(e,t),e.button=-1,g.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);g.cancel(e),this.deactivateMouse()},deactivateMouse:function(){O.delete(this.POINTER_ID)}},M=g.captureInfo,L=_.findTarget.bind(_),D=_.allShadows.bind(_),R=g.pointermap,B={events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){N.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute("touch-action"),i=this.touchActionToScrollType(e);i&&(t._scrollType=i,g.listen(t,this.events),D(t).forEach(function(t){t._scrollType=i,g.listen(t,this.events)},this))},elementRemoved:function(t){t._scrollType=void 0,g.unlisten(t,this.events),D(t).forEach(function(t){t._scrollType=void 0,g.unlisten(t,this.events)},this)},elementChanged:function(t,e){var i=t.getAttribute("touch-action"),n=this.touchActionToScrollType(i),o=this.touchActionToScrollType(e);n&&o?(t._scrollType=n,D(t).forEach(function(t){t._scrollType=n},this)):o?this.elementRemoved(t):n&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,i=this.scrollTypes;return"none"===e?"none":e===i.XSCROLLER?"X":e===i.YSCROLLER?"Y":i.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===R.size||1===R.size&&R.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,i=g.cloneEvent(t),n=i.pointerId=t.identifier+2;i.target=M[n]||L(i),i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount,i.button=0,i.buttons=this.typeToButtons(e.type),i.width=t.radiusX||t.webkitRadiusX||0,i.height=t.radiusY||t.webkitRadiusY||0,i.pressure=t.force||t.webkitForce||.5,i.isPrimary=this.isPrimaryTouch(t),i.pointerType=this.POINTER_TYPE,i.altKey=e.altKey,i.ctrlKey=e.ctrlKey,i.metaKey=e.metaKey,i.shiftKey=e.shiftKey;var o=this;return i.preventDefault=function(){o.scrolling=!1,o.firstXY=null,e.preventDefault()},i},processTouches:function(t,e){var i=t.changedTouches;this.currentTouchEvent=t;for(var n,o=0;o<i.length;o++)n=i[o],e.call(this,this.touchToPointer(n))},shouldScroll:function(t){if(this.firstXY){var e,i=t.currentTarget._scrollType;if("none"===i)e=!1;else if("XY"===i)e=!0;else{var n=t.changedTouches[0],o=i,r="Y"===i?"X":"Y",s=Math.abs(n["client"+o]-this.firstXY[o]),a=Math.abs(n["client"+r]-this.firstXY[r]);e=s>=a}return this.firstXY=null,e}},findTouch:function(t,e){for(var i,n=0,o=t.length;n<o&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(R.size>=e.length){var i=[];R.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var o=t.out;i.push(o)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){R.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),g.enterOver(t),g.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,i=R.get(e.pointerId);if(i){var n=i.out,o=i.outTarget;g.move(e),n&&o!==e.target&&(n.relatedTarget=e.target,e.relatedTarget=o,n.target=o,e.target?(g.leaveOut(n),g.enterOver(e)):(e.target=o,e.relatedTarget=null,this.cancelOut(e))),i.out=e,i.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(g.up(t),g.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){g.cancel(t),g.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){R.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=V.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch(i)){var n={x:i.clientX,y:i.clientY};e.push(n);var o=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,n);setTimeout(o,2500)}}};N=new i(B.elementAdded,B.elementRemoved,B.elementChanged,B);var k,H,X=g.pointermap,j=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,z={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){g.listen(t,this.events)},unregister:function(t){g.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return j&&(e=g.cloneEvent(t),e.pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){X.delete(t)},MSPointerDown:function(t){X.set(t.pointerId,t);var e=this.prepareEvent(t);g.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);g.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);g.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);g.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);g.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);g.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=g.makeEvent("lostpointercapture",t);g.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=g.makeEvent("gotpointercapture",t);g.dispatchEvent(e)}},U=window.navigator;return U.msPointerEnabled?(k=function(t){s(t),a(this),c(t)&&this.msSetPointerCapture(t)},H=function(t){s(t),this.msReleasePointerCapture(t)}):(k=function(t){s(t),a(this),c(t)&&g.setCapture(t,this)},H=function(t){s(t),g.releaseCapture(t,this)}),function(){if(I){A.forEach(function(t){String(t)===t?(S+=o(t)+r(t)+"\n",F&&(S+=n(t)+r(t)+"\n")):(S+=t.selectors.map(o)+r(t.rule)+"\n",F&&(S+=t.selectors.map(n)+r(t.rule)+"\n"))});var t=document.createElement("style");t.textContent=S,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=t,window.navigator.msPointerEnabled){var e=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:e,enumerable:!0}),g.registerSource("ms",z)}else g.registerSource("mouse",V),void 0!==window.ontouchstart&&g.registerSource("touch",B);g.register(document)}}(),function(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:k},releasePointerCapture:{value:H}})}(),{dispatcher:g,Installer:i,PointerEvent:t,PointerMap:h,targetFinding:_}})},function(t,e,i){t.exports=i(11),t.exports.app=i(49)},function(t,e,i){var n=i(0);t.exports=n.expand({loadSpecIDCSS:i(12),scene:i(6),interfaces:{solo:{SimulationAPI:i(14).SimulationAPI},viewer3d:{SimulationAPI:i(16).SimulationAPI},ProcedureView:i(17),FigureView:i(22),DocumentView:i(25)},factory:{fps:i(27),popupmenu:i(28),alert:i(31),error:i(34),loading:i(35),iframe:i(39),viewer2d:i(40),viewer3d:i(41),isoview:i(42),svg:i(43),solo:i(44)}},n)},function(t,e,i){function n(t,e){for(var i=!1,n=new RegExp(t+"\\.css","i"),r=document.getElementsByTagName("link"),s=0;s<r.length&&!i;s++){var a=r[s].getAttribute("href");a&&(i=n.test(a))}return i?e():(document.body.style.visibility="hidden",o.loadStyleSheet(t+".css",function(){document.body.style.visibility="visible",e()})),i}var o=i(0);t.exports=n},function(t,e,i){var n=i(0).defineClass,o=i(2),r=i(1),s={},a=n(null,function(t){if(!t)return null;var e=t;if("string"==typeof t?t=document.getElementById(t):e=t.getAttribute("id"),!e){e="__cortona3d-container-1";for(var i=1;document.getElementById(e);i++)e="__cortona3d-container-"+i;t.setAttribute("id",e)}return e in s||(t.classList&&t.classList.add("cortona3d-container"),s[e]=this instanceof a?this:new a(e),this.container=t),s[e]},{add:function(){for(var t=arguments.length-1;t>=0;t--){var e=arguments[t];e instanceof o&&(e=e.factory),e instanceof r&&(this[e.type]=e.create(this))}return this},remove:function(){for(var t=arguments.length-1;t>=0;t--){var e=arguments[t];e instanceof o&&(e=e.factory),e instanceof r&&(e.destroy(this),delete this[e.type])}return this},destroy:function(){var t=this.container.getAttribute("id"),e=s[t];for(var i in e)e[i]instanceof o&&e.remove(e[i].factory);this.container.classList&&this.container.classList.remove("cortona3d-container"),delete s[t]}});t.exports=a},function(t,e,i){function n(){}function o(){if(this.m_procedureDuration){var t=this.control3d.range;t.disabled=!0,t.min=100*this.procedure.getPlayableRangeStartTime()/this.m_procedureDuration,t.max=100*this.procedure.getPlayableRangeStopTime()/this.m_procedureDuration,t.disabled=!1}}var r=i(0).defineClass,s=i(15).SimulationAPIBase,a=r(s,function(t){var e=a.superClass.call(this,t);return e===this&&(this.AUTOSTOP={PROCEDURE:0,STEP:1,SUBSTEP:2},this.m_procedureDuration=0,this.m_procedurePosition=0,this.m_substepPath=new Array(3),this.m_substepPathPrev=new Array(3),this.m_autostopMode=this.AUTOSTOP.PROCEDURE,this.attach()),e},{load:function(t){this.control3d.load(t)},scene_loaded_on_start:n,vcr_play:function(){this.procedure&&(this.procedure.requestPlayerState(),this.procedure.play())},vcr_play_ext:function(){this.vcr_play()},vcr_stop:function(){if(this.procedure){var t=this.procedure.getPlayableRangeStartTime(),e=this.procedure.getPlayableRangeStopTime();t>.001||Math.abs(this.m_procedureDuration-e)>.001?this.procedure.setPlayPosition(t,!0):this.procedure.stop()}},vcr_pause:function(){this.procedure&&this.procedure.pause()},set_ui_smoothcontrol:function(t){this.control3d.toggleRangeControl(t)},set_ui_axis:n,set_ui_vcr:n,set_ui_zoom:n,vcr_goto:function(t){this.procedure&&(this.procedure.setPlayRange(t,t,5),o.call(this))},vcr_next_step:function(){this.procedure&&(this.procedure.forward(),o.call(this))},vcr_previous_step:function(){this.procedure&&(this.procedure.backward(),o.call(this))},set_speed_ratio:function(t){this.procedure&&this.procedure.setPlaybackSpeed(+t)},set_freeze_viewpoint:function(t){this.procedure&&this.procedure.freezeCamera(!!t)},vcr_set_position:function(t){this.procedure&&(this.procedure.seekToSubstep(t),o.call(this))},vcr_set_proc_fraction:function(t,e){this.procedure&&this.procedure.setPlayPosition(t*this.m_procedureDuration,!!e)},vcr_set_seek_position:function(t,e){if(this.procedure){var i=this.procedure.getPlayableRangeStartTime()+t*(this.procedure.getPlayableRangeStopTime()-this.procedure.getPlayableRangeStartTime());this.procedure.setPlayPosition(i,!!e)}},set_autostop_mode:function(t){this.m_autostopMode=t||0},fit_to_object:function(t){if(this.solo){var e=this.solo.app;e.fitObjectsInView(e.getObjectWithName(t),!0)}},fit_to_objects:function(t){if(this.solo){var e=this.solo.app;e.fitObjectsInView(t.map(function(t){return e.getObjectWithName(t)}),!0)}},flash_node:function(t){if(this.solo){var e=this.solo.app,i=e.getObjectWithName(t);e.setObjectPropertyf(i,0,!0,1,.8,0),e.setObjectPropertyf(i,1,!0,.278,.22,0),setTimeout(function(){e.restoreObjectProperty(i,0,!0),e.restoreObjectProperty(i,1,!0)},1e3)}},flash_nodes:function(t){var e=this;t.map(function(t){e.flash_node(t)})},set_emissiveColor:function(t,e,i,n){if(this.solo){var o=this.solo.app;t.map(function(t){o.setObjectPropertyf(o.getObjectWithName(t),1,!1,e,i,n)})}},set_diffuseColor:function(t,e,i,n){if(this.solo){var o=this.solo.app;t.map(function(t){o.setObjectPropertyf(o.getObjectWithName(t),0,!1,e,i,n)})}},set_original_diffuseColor:function(t,e){if(this.solo){var i=this.solo.app;t.map(function(t){i.restoreObjectProperty(i.getObjectWithName(t),0,!1)})}},set_transparency:function(t,e){if(this.solo){var i=this.solo.app;t.map(function(t){i.setObjectPropertyf(i.getObjectWithName(t),2,!1,e)})}},get_transparency:function(t){return 0},get_diffuseColor:function(t){return[]},vcr_set_range:function(t,e){this.procedure&&(this.procedure.setPlayRange(t,e,4),o.call(this))},vcr_get_fraction:function(){if(this.procedure){var t=this.procedure.getPlayableRangeStopTime()-this.procedure.getPlayableRangeStartTime();return Math.min(1,Math.max(0,(this.m_procedurePosition-this.procedure.getPlayableRangeStartTime())/t).toFixed(3))}},vcr_get_proc_fraction:function(){return Math.min(1,(this.m_procedurePosition/this.m_procedureDuration).toFixed(3))},vcr_get_step_fraction:function(){return this.vcr_get_fraction()},attach:function(){if(!this.defaultHandler){var t,e,i=this;this.defaultHandler=function(n){switch(n.type){case"OnReady":i.solo=i.control3d.solo,i.procedure=i.solo.app.procedure;break;case"OnSceneLoaded":var o=!1;if(n.detail.raw[0]&&"procedure"==n.detail.src.type){i.m_procedureDuration=n.detail.src.duration,i.solo.app.configureInstance(i.solo.app.DISABLE_PROCEDURE_TEXT_EMISSION,0),i.procedure.didFireEvent=function(t,e,n,o){setTimeout(function(){var t=i.solo.app.procedure.interactivity;t&&i._trigger(i.on_events_out,[[{id:e,info:t.getProcedureItemInfo(e).description,title:n}]]),i._trigger(i.on_alert,[e])},0)},i.procedure.didChangePlayerState=function(t,e){i.m_procedurePosition=t,setTimeout(function(){if(i.m_procedureDuration){var t=Math.max(0,Math.min(1,i.m_procedurePosition/i.m_procedureDuration)),n=Math.max(0,Math.min(1,(i.m_procedurePosition-i.procedure.getPlayableRangeStartTime())/(i.procedure.getPlayableRangeStopTime()-i.procedure.getPlayableRangeStartTime())));i.control3d.range.value=100*t,i._trigger(i.on_proc_fraction_changed,[t]),i._trigger(i.on_seek_position_changed,[n])}(e=256===e?i.STOP:1&e?i.PLAY:i.PAUSE)!==i.state&&(i._trigger(i.on_vcr_state,[e]),i.state=e)},0)},i.procedure.didEnterSubstepWithName=function(t){var e=i.solo.app.procedure.interactivity;if(e){var n=e.getProcedureItemInfo(t);switch(i.m_substepPath=[e.getProcedureId(),n.parentStep,t],setTimeout(function(){i._trigger(i.on_start_substep,i.m_substepPath),i._trigger(i.on_start_new_substep,i.m_substepPath)},0),i.m_autostopMode){case i.AUTOSTOP.STEP:i.m_substepPath[1]!==i.m_substepPathPrev[1]&&i.vcr_pause();break;case i.AUTOSTOP.SUBSTEP:i.m_substepPath[i.m_substepPath.length-1]!==i.m_substepPathPrev[i.m_substepPathPrev.length-1]&&i.vcr_pause()}i.m_substepPathPrev=i.m_substepPath}};var r=i.procedure.getOption("3DBackgroundColor");r&&i.solo.app.setDefaultBackgroundColors(r),o=!0}i._trigger(i.on_simulation_load,[o]);break;case"MouseDown":t=n.detail.raw[0],e=n.detail.raw[1];break;case"MouseUp":var s=n.detail.raw[2],a=n.detail.raw[3];if(1===t&&4&e){var c=i.solo.app.pickObject(s,a);c?(i.solo.app.setRotationCenterToObjects([c.handle]),i.solo.app.fitObjectsInView([c.handle],!0)):(i.solo.app.resetRotationCenter(),i.solo.app.fitSceneInView(!0)),n.detail.src.preventDefault()}}return!0},this.control3d.instance.addEventListener("OnSceneLoaded",this.defaultHandler,!1),this.control3d.instance.addEventListener("OnReady",this.defaultHandler,!1),this.control3d.instance.addEventListener("MouseUp",this.defaultHandler,!1),this.control3d.instance.addEventListener("MouseDown",this.defaultHandler,!1),console.log("SimulationAPI attached")}},detach:function(){this.defaultHandler&&(this.control3d.instance.removeEventListener("OnSceneLoaded",this.defaultHandler,!1),this.control3d.instance.removeEventListener("OnReady",this.defaultHandler,!1),this.control3d.instance.removeEventListener("MouseUp",this.defaultHandler,!1),this.control3d.instance.removeEventListener("MouseDown",this.defaultHandler,!1),delete this.defaultHandler,console.log("SimulationAPI detached"))}});t.exports={SimulationAPI:a}},function(t,e,i){var n=i(0).defineClass,o=function(){console.info("nop"),console.log(arguments),console.trace()},r=n(null,function(t){return r._api||(this.control3d=t,this.STOP=0,this.PLAY=1,this.PAUSE=2,this.state=this.STOP,r._api=this),r._api},{load:o,unload:o,scene_loaded_on_start:o,vcr_play:o,vcr_play_ext:o,vcr_stop:o,vcr_pause:o,vcr_next_substep:o,vcr_previous_substep:o,vcr_next_step:o,vcr_previous_step:o,vcr_goto:o,vcr_set_range:o,vcr_set_position:o,vcr_set_fraction:o,vcr_set_proc_fraction:o,vcr_set_step_fraction:o,vcr_set_seek_position:o,vcr_get_fraction:o,vcr_get_proc_fraction:o,vcr_get_step_fraction:o,get_procedure_id:o,get_step_id:o,get_substep_id:o,set_speed_ratio:o,set_freeze_viewpoint:o,set_mute_audio:o,get_speed_ratio:o,get_freeze_viewpoint:o,set_ui_smoothcontrol:o,set_ui_axis:o,set_ui_vcr:o,set_ui_zoom:o,set_autostop_mode:o,zoom_reset:o,zoom_set_delta:o,zoom_set_level:o,set_guided_zoom:o,set_new_viewpoint:o,get_viewpoint_data:o,fit_to_object:o,fit_to_objects:o,flash_node:o,flash_nodes:o,set_emissiveColor:o,checkVisibility:o,get_steps_array:o,get_substeps_array:o,interactivity_xml_load:o,interactivity_xml_get_task:o,interactivity_xml_get_subtasks:o,set_procedure:o,set_multithread_procedure:o,_trigger:function(t,e){"function"==typeof t&&t.apply(this,e)},attach:o,detach:o});t.exports={SimulationAPIBase:r}},function(t,e){function n(t){if(null!==Ot)return Ot;this._ver="1.4.0.11",this.STOP=0,this.PLAY=1,this.PAUSE=2,this.auto_stop=!1,this.ATP=0,this.state=0,this.procedure_fraction=0,this.zoom_level=.5,this.seek_position=0,this.id_procedure="",this.id_step="",this.id_substep="",this.ignore_viewpoint_changes=void 0,this.is_loaded=!1,this.cortona=t.instance,this.control_script=null,this._last_alert="",this.isMultiThreadAnimation=!1,this.AnimationThreads="",this.is_nonlinear_mode=!1,this.AllSubSteps=null,this.attach()}function o(t,e,i,n){var o=""===n;if(Ot.is_loaded=!1,o){var r=Ot.cortona.Engine;if(r.ValidateNodes=1,r.AutoRefresh=1,e.Count>0){try{r.RootNodes.Clear(),r.RootNodes.Add(e),Ot.control_script=r.Nodes.Item("VCR_CONTROL_SCRIPT");var s=Ot.cortona.skin;Ot.cortona.skin="{1706B265-E103-4332-9871-7FEE6C37C699}",Ot.cortona.refresh(),Ot.cortona.skin=s,Ot.id_procedure=Ot.get_procedure_id(),Ot.id_step=Ot.get_step_id(),Ot.id_substep=Ot.get_substep_id(),Ot.is_loaded=!0}catch(t){r.RootNodes.Clear()}try{void 0===Ot.ignore_viewpoint_changes&&(Ot.ignore_viewpoint_changes=!1),Ot.control_script.Fields.Item("set_ignore_viewpoints").Value=Ot.ignore_viewpoint_changes}catch(t){}}}"on_simulation_load"in Ot&&(Ot.on_simulation_load(Ot.is_loaded),Ot._advise_events())}function r(){try{Ot.control_script.Fields.Item("on_start_substep").Advise(function(t,e,i){var n,o,r;try{n=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}catch(e){n=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}null===o&&(o=""),null===r&&(r=""),null===n&&(n=""),"on_start_substep"in Ot&&Ot.on_start_substep(n,o,r),Ot._check_alert(r)},0),Ot.control_script.Fields.Item("on_start_new_substep").Advise(function(t,e,i){var n,o,r;try{n=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}catch(e){n=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}null===o&&(o=""),null===r&&(r=""),null===n&&(n=""),"on_start_new_substep"in Ot&&Ot.on_start_new_substep(n,o,r),Ot.id_procedure=n,Ot.id_step=o,Ot.id_substep=r},0);try{Ot.control_script.Fields.Item("on_new_state").Advise($,0)}catch(t){Ot.control_script.Fields.Item("on_vcr_state").Advise(J,0)}Ot.control_script.Fields.Item("on_proc_fraction_changed").Advise(function(t,e,i){"on_proc_fraction_changed"in Ot&&Ot.on_proc_fraction_changed(t.Value),Ot.procedure_fraction=t.Value},0);try{Ot.control_script.Fields.Item("onSliderFraction").Advise(et,0)}catch(t){Ot.control_script.Fields.Item("on_proc_fraction_changed").Advise(et,0)}Ot.control_script.Fields.Item("on_zoom_changed").Advise(function(t,e,i){"on_zoom_changed"in Ot&&Ot.on_zoom_changed(t.Value),Ot.zoom_level=t.Value},0);try{Ot.control_script.Fields.Item("on_procedure_events").Advise(tt,0)}catch(t){Ot.control_script.Fields.Item("on_event_out").Advise(Q,0)}}catch(t){}}function s(t){this._last_alert!=t&&this.state==this.PLAY&&(this._last_alert=t,""!==this._last_alert&&this._last_alert.indexOf("_")>=0&&"on_alert"in this&&this.on_alert(this._last_alert))}function a(t){Ot=this,this.cortona.Engine.CreateVrmlFromUrl(t,o)}function c(){Ot=this,Ot.is_loaded=!1;var t=Ot.cortona.Engine;try{Ot.control_script=t.Nodes.Item("VCR_CONTROL_SCRIPT"),Ot.id_procedure=Ot.get_procedure_id(),Ot.id_step=Ot.get_step_id(),Ot.id_substep=Ot.get_substep_id(),Ot.is_loaded=!0}catch(e){t.RootNodes.Clear()}try{void 0===Ot.ignore_viewpoint_changes&&(Ot.ignore_viewpoint_changes=!1),Ot.control_script.Fields.Item("set_ignore_viewpoints").Value=Ot.ignore_viewpoint_changes}catch(t){}"on_simulation_load"in Ot&&Ot.on_simulation_load(Ot.is_loaded),Ot._advise_events()}function l(){this.is_loaded=!1,this.cortona.Engine.RootNodes.Clear()}function u(){this.is_loaded&&(0!==this.control_script.Fields.Item("isFinal").Value&&this.vcr_stop(),this.vcr_play_ext())}function d(){if(this.is_loaded){if("Script"==this.control_script.TypeName&&this.control_script.Fields.Item("isFinal").Value&&0===this.control_script.Fields.Item("cmd_stack").Count)return;if(this.control_script.Fields.Item("vcr_play").Value=0,this.isMultiThreadAnimation)for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_play").Value=0}}function h(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_stop").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_stop").Value=0}function p(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_pause").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_pause").Value=0}function f(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_forward").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_forward").Value=0}function m(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_backward").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_backward").Value=0}function v(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_next").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_next").Value=0}function g(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_previous").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_previous").Value=0}function _(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_goto").Value=String(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_goto").Value=String(t)}function y(t,e){if(this.is_loaded){var i=this.cortona.Engine.CreateField("MFString");i.Add(String(t)),i.Add(String(e)),this.control_script.Fields.Item("vcr_set_range").Assign(i)}}function b(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_set_position").Value=String(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_set_position").Value=String(t)}function T(t){if(this.is_loaded&&(this.control_script.Fields.Item("setSliderPosition").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("setSliderPosition").Value=Number(t)}function w(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_set_fraction").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_set_fraction").Value=Number(t)}function E(t,e){if(this.is_loaded){var i=e?"set_procedure_fraction":"vcr_set_proc_fraction";if(this.control_script.Fields.Item(i).Value=Number(t),this.isMultiThreadAnimation)for(var n=0;n<this.AnimationThreads.length;n++)this.AnimationThreads[n].Fields.Item(i).Value=Number(t)}}function C(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_set_step_fraction").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_set_step_fraction").Value=Number(t)}function A(){if(this.is_loaded){var t=0;try{t=this.control_script.Fields.Item("on_substep_fraction_changed").Value}catch(t){}return t}}function S(){if(this.is_loaded){var t=0;try{t=this.control_script.Fields.Item("on_proc_fraction_changed").Value}catch(t){}return t}}function I(){if(this.is_loaded){var t=0;try{t=this.control_script.Fields.Item("on_step_fraction_changed").Value}catch(t){}return t}}function F(){var t="";if(this.is_loaded)try{t=this.control_script.Fields.Item("on_start_new_substep").GetValue(0)}catch(t){}return t}function O(){var t="";if(this.is_loaded)try{t=this.control_script.Fields.Item("on_start_new_substep").GetValue(1)}catch(t){}return t}function x(){var t="";if(this.is_loaded)try{t=this.control_script.Fields.Item("on_start_new_substep").GetValue(2)}catch(t){}return t}function P(t){if(this.is_loaded&&(this.control_script.Fields.Item("set_speed_ratio").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("set_speed_ratio").Value=Number(t)}function N(t){this.is_loaded&&(this.control_script.Fields.Item("set_ignore_viewpoints").Value=t?1:0)}function V(t){if(this.is_loaded)try{return this.control_script.Fields.Item("set_mute_audio").Value=t?1:0,!0}catch(t){return!1}}function M(){return this.is_loaded?this.control_script.Fields.Item("timeCompression").Value:1}function L(){return!!this.is_loaded&&this.control_script.Fields.Item("blockViewpoints").Value}function D(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_smoothcontrol").Value=t?1:0)}function R(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_axis").Value=t?1:0)}function B(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_vcr").Value=t?1:0)}function k(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_zoom").Value=t?1:0)}function H(t){this.is_loaded&&(this.control_script.Fields.Item("set_stop_by_step").Value=1==t,this.control_script.Fields.Item("set_stop_by_substep").Value=2==t)}function X(){this.is_loaded&&(this.control_script.Fields.Item("zoom_reset").Value=0)}function j(t){this.is_loaded&&(this.control_script.Fields.Item("zoom_set_delta").Value=Number(t))}function z(t){this.is_loaded&&(this.control_script.Fields.Item("zoom_set_level").Value=Number(t))}function U(t){this.is_loaded&&(this.control_script.Fields.Item("isEnabledSkinControl").Value=t?1:0)}function Y(t){if(this.is_loaded){for(var e=this.cortona.Engine.CreateField("MFFloat"),i=0;i<t.length;i++)e.Add(Number(t[i]));this.control_script.Fields.Item("set_new_viewpoint").Assign(e)}}function G(){var t=[];if(this.is_loaded)try{for(var e=this.control_script.Fields.Item("OP").Value.Fields.Item("steps"),i=0;i<e.Count;i++)t.push(e.GetValue(i).Fields.Item("id").Value)}catch(t){}return t}function W(){var t=[];if(this.is_loaded)try{for(var e=this.control_script.Fields.Item("OP").Value.Fields.Item("steps"),i=0;i<e.Count;i++)for(var n=e.GetValue(i).Fields.Item("substeps"),o=0;o<n.Count;o++)t.push(n.GetValue(o).Fields.Item("id").Value)}catch(t){}return t}function q(t){}function Z(){return""}function K(){return[]}function $(t,e,i){var n=Ot.state;if(Ot.isMultiThreadAnimation){for(var o=0,r=0;r<Ot.AnimationThreads.length;r++){if("1"==Ot.AnimationThreads[r].Fields.Item("on_new_state").GetValue(0)){o=1;break}"2"==Ot.AnimationThreads[r].Fields.Item("on_new_state").GetValue(0)&&(o=2)}this.state!=o&&("on_vcr_state"in Ot&&Ot.on_vcr_state(o),Ot.state=o)}else"on_vcr_state"in Ot&&Ot.on_vcr_state(parseInt(t.GetValue(0))),Ot.state=+t.GetValue(0);"on_finish_procedure"in Ot&&n==Ot.PLAY&&Ot.state==Ot.STOP&&"0"!=t.GetValue(1)&&setTimeout(Ot.on_finish_procedure,0),Ot._check_alert(Ot.id_substep)}function J(t,e,i){var n=Ot.state;if(Ot.isMultiThreadAnimation){for(var o=0,r=0;r<Ot.AnimationThreads.length;r++){if(1==Ot.AnimationThreads[r].Fields.Item("on_vcr_state").Value){o=1;break}2==Ot.AnimationThreads[r].Fields.Item("on_vcr_state").Value&&(o=2)}this.state!=o&&("on_vcr_state"in Ot&&Ot.on_vcr_state(o),Ot.state=o)}else"on_vcr_state"in Ot&&Ot.on_vcr_state(t.Value),Ot.state=+t.Value;"on_finish_procedure"in Ot&&n==Ot.PLAY&&Ot.state==Ot.STOP&&0!==Ot.control_script.Fields.Item("isFinal").Value&&setTimeout(Ot.on_finish_procedure,0),Ot._check_alert(Ot.id_substep)}function Q(t,e,i){if("on_events_out"in Ot){for(var n=[],o=Ot.control_script.Nodes.Item("VCR_CONTROL_SCRIPT").Fields.Item("CommandsSetID").Value.Fields.Item("_"),r=0;r<o.Count;r++)n.push({id:o.GetValue(r).Fields.Item("ID").Value,title:o.GetValue(r).Fields.Item("title").Value,info:o.GetValue(r).Fields.Item("info").Value});Ot.on_events_out(n)}}function tt(t,e,i){if("on_events_out"in Ot){for(var n=[],o=0;o<t.Count;o+=3)n.push({id:t.GetValue(o),title:t.GetValue(o+1),info:t.GetValue(o+2)});Ot.on_events_out(n)}}function et(t,e,i){"on_seek_position_changed"in Ot&&Ot.on_seek_position_changed(t.Value)}function it(){try{if(parseFloat(this.control_script.Fields.Item("version_num").Value)<3)return alert("WARNING:\r\n\r\nOld version simulation. Nonlinear mode not supported."),0;var t=this.cortona.Engine,e=this.control_script.Fields.Item("newproc");this.AllSubSteps=this.control_script.Fields.Item("AllSubSteps").Value.Fields.Item("children");var i=t.CreateVrmlFromString('PROTO Procedure[field SFString title "" field SFString comment "" exposedField SFString id "" exposedField MFNode steps []]{Group{children IS steps}}PROTO Step[field SFString title "" exposedField SFString id "" exposedField SFBool simulate TRUE exposedField MFNode substeps []]{Group{children IS substeps}}Procedure{steps Step{substeps[]}}');return e.Value=i.GetValue(0),this.is_nonlinear_mode=!0,1}catch(t){return 0}}function nt(t,e){if(this.is_loaded){if(this.vcr_pause(),0===this._prepare_nonlinear_mode())return 0;this._clear_multithread_mode();var i=this._form_substeps_list(t,this.control_script);if(this._refresh(),i>0)return this._preset_to_position(e),1}return 0}function ot(t,e){if(this.is_loaded){if(t.length<=1)return 0===t.length?this.set_procedure([],e):this.set_procedure(t[0],e);if(this.vcr_pause(),0===this._prepare_nonlinear_mode())return 0;this.isMultiThreadAnimation=!0,this._prepare_multithread_animations(t.length);var i=0,n=!1;i=this._form_substeps_list(t[0],this.control_script),i>0&&(n=!0);for(var o=0;o<this.AnimationThreads.length;o++)(i=this._form_substeps_list(t[o+1],this.AnimationThreads[o]))>0&&(n=!0);if(n)return this._refresh(),this._corect_procedure_duration(),this._preset_to_position(e),1}return 0}function rt(){if(this.isMultiThreadAnimation){for(var t=this._get_animation_duration(this.control_script),e=0,i=0,n=[],o=null,r='PROTO Set_NULL[field SFString title "" field MFFloat Parameters [] exposedField MFFloat period [0,1,0,0,1] eventIn SFFloat time_fraction  exposedField SFInt32 objectID 0 exposedField SFInt32 attributeID 0 exposedField SFString objectName "" exposedField SFString attributeName "null" eventOut SFVec3f value_changed ]{Group{}}PROTO SubStepNULL[exposedField MFNode commands [] field SFString title "NULL" exposedField SFString id "6FEB6759-47D8-43EC-89D0-4AB3D0A1A287" exposedField SFTime duration 1]{Group{children IS commands}}SubStepNULL{commands Set_NULL{}}',s=0;s<this.AnimationThreads.length;s++)i=substeps_count=this._get_animation_duration(this.AnimationThreads[s]),n.push(i),i>e&&i>t&&(e=i);e>0?(i=e-t,o=this.cortona.Engine.CreateVrmlFromString(r),this.control_script.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Add(o.GetValue(0)),o.GetValue(0).Fields.Item("duration").Value=i):e=t;for(var a=0;a<this.AnimationThreads.length;a++)e>n[a]+.01&&(i=e-n[a],o=this.cortona.Engine.CreateVrmlFromString(r),this.AnimationThreads[a].Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Add(o.GetValue(0)),o.GetValue(0).Fields.Item("duration").Value=i)}}function st(t){var e=t.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps"),n=0;for(i=0;i<e.Count;i++)n+=e.GetValue(i).Fields.Item("duration").Value;return n}function at(){if(this.isMultiThreadAnimation){this.isMultiThreadAnimation=!1;for(var t=0;t<this.AnimationThreads.length;t++)this.cortona.Engine.RootNodes.Remove("animation_node_N"+t);this.AnimationThreads=[]}}function ct(t){var e,i=t-1,n=this.control_script.Proto,o=null,r=this.AnimationThreads.length,s=null;if(r<i)for(e=r;e<i;e++){o=n.CreateInstance(),this.cortona.Engine.RootNodes.Add(o),o.Name="animation_node_N"+e;try{o.Fields.Item("on_new_state").Advise($,0)}catch(t){o.Fields.Item("on_vcr_state").Advise(J,0)}this.cortona.Engine.AddRoute(this.control_script,"outPlayPause",o,"inPlayPause"),this.cortona.Engine.AddRoute(this.control_script,"onSliderMove",o,"setSliderPosition"),s=this.cortona.Engine.CreateVrmlFromString('PROTO Procedure[field SFString title "" field SFString comment "" exposedField SFString id "" exposedField MFNode steps []]{Group{children IS steps}}PROTO Step[field SFString title "" exposedField SFString id "" exposedField SFBool simulate TRUE exposedField MFNode substeps []]{Group{children IS substeps}}Procedure{steps Step{substeps[]}}'),o("newproc").Value=s.GetValue(0),this.AnimationThreads.push(o)}if(r>i){for(e=0;e<i;e++)this.AnimationThreads.push(o);for(e=i;e<r;e++)this.cortona.Engine.RootNodes.Remove("animation_node_N"+e),this.AnimationThreads.pop()}}function lt(t,e){var i=this.cortona.Engine.CreateField("MFNode");if(t.length>0)for(var n=0,o=0;o<t.length;o++)n=this._add_animation_substep(t[o]),n>=0?i.Add(this.AllSubSteps.GetValue(n)):alert("WARNING:\r\n\r\nAnimation with ID - "+t[o]+" - not found.");return e.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Assign(i),i.Count}function ut(t){for(var e=0;e<this.AllSubSteps.Count;e++)if(this.AllSubSteps.GetValue(e).Fields.Item("id").Value==t)return e;return-1}function dt(t){var e=0,i=0,n=this.cortona.Engine.CreateField("MFFloat");if(t>0&&(e=this.control_script.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Count-1,i=1),this.control_script.Fields.Item("set_new_procedure").Assign(this.control_script.Fields.Item("newproc")),n.Add(0),n.Add(e),n.Add(i),this.control_script.Fields.Item("now_step_substep_fraction").Assign(n),this.isMultiThreadAnimation)for(var o=0;o<this.AnimationThreads.length;o++)t>0&&n.SetValue(1,this.AnimationThreads[o].Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Count-1),this.AnimationThreads[o].Fields.Item("set_new_procedure").Assign(this.AnimationThreads[o].Fields.Item("newproc")),this.AnimationThreads[o].Fields.Item("now_step_substep_fraction").Assign(n);this._refresh()}function ht(){}function pt(t,e,i){var n=this.cortona.Engine;return n.CreatePosition(n.CreateNodeFromString("Transform{translation "+t+" "+e+" "+i+"}")).Translation}function ft(t){var e=[];switch(t.Type){case 210:e=[t.X,t.Y,t.Z,t.Angle];break;case 213:e=[t.X,t.Y,t.Z];break;case 212:e=[t.X,t.Y]}return e}function mt(t){var e=t.BBoxCenter,i=t.BBoxSize;if(0===i.X&&0===i.Y&&0===i.Z)return[];var n=this.cortona.Engine,o=this._create_vector(e.X,e.Y,e.Z),r=this._create_vector(e.X+i.X,e.Y+i.Y,e.Z+i.Z),s=this._create_vector(e.X-i.X,e.Y+i.Y,e.Z+i.Z),a=this._create_vector(e.X+i.X,e.Y-i.Y,e.Z+i.Z),c=this._create_vector(e.X-i.X,e.Y-i.Y,e.Z+i.Z),l=this._create_vector(e.X+i.X,e.Y+i.Y,e.Z-i.Z),u=this._create_vector(e.X-i.X,e.Y+i.Y,e.Z-i.Z),d=this._create_vector(e.X+i.X,e.Y-i.Y,e.Z-i.Z),h=this._create_vector(e.X-i.X,e.Y-i.Y,e.Z-i.Z),p=n.CreatePosition(null);try{for(;null!==t.Fields.Item("parent").Value;){if(t.Fields.Item("whichChoice")&&t.Fields.Item("whichChoice").Value<0)return[];t=t.Fields.Item("parent").Value,p.SetTransform(t),o=p.MultVecMatrix(o),r=p.MultVecMatrix(r),s=p.MultVecMatrix(s),a=p.MultVecMatrix(a),c=p.MultVecMatrix(c),l=p.MultVecMatrix(l),u=p.MultVecMatrix(u),d=p.MultVecMatrix(d),h=p.MultVecMatrix(h)}}catch(t){}return[o,r,s,a,c,l,u,d,h]}function vt(t){this.fit_to_objects([t])}function gt(t){for(var e=[],i=this.cortona.Engine,n=0;n<t.length;n++)try{e.push(this._get_node_boundbox(i.Nodes.Item(t[n])))}catch(t){}var o=[],r=[],s=[];for(n=0;n<e.length;n++)for(var a=e[n],c=1;c<a.length;c++)o.length>0?(o[0]=Math.min(o[0],a[c].X),o[1]=Math.max(o[1],a[c].X),r[0]=Math.min(r[0],a[c].Y),r[1]=Math.max(r[1],a[c].Y),s[0]=Math.min(s[0],a[c].Z),s[1]=Math.max(s[1],a[c].Z)):(o=[a[c].X,a[c].X],r=[a[c].Y,a[c].Y],s=[a[c].Z,a[c].Z]);if(0!==o.length){var l=this._create_vector((o[0]+o[1])/2,(r[0]+r[1])/2,(s[0]+s[1])/2),u=0;u=Math.max(Math.abs(o[0]-o[1]),Math.max(Math.abs(r[0]-r[1]),Math.abs(s[0]-s[1])));var d=i.BBoxSize,h=Math.sqrt(d.X*d.X+d.Y*d.Y+d.Z*d.Z);.45*h<u&&(u=.45*h);var p=.828427,f=2*u/p,m=i.CreatePosition(null);m.Rotation=i.CameraPosition.Rotation;var v=i.CreatePosition(null);v.Translation=this._create_vector(l.X,l.Y,l.Z);var g=v.MultVecMatrix(m.Inverse().MultMatrixVec(this._create_vector(0,0,f))),_=this._createArrayFromField(g),y=this._createArrayFromField(i.CameraPosition.Rotation),b=.2*u/p,T=h/p,w=new Array(l.X,l.Y,l.Z,_[0],_[1],_[2],y[0],y[1],y[2],y[3],b,T,0);Ot.set_new_viewpoint(w)}}function _t(t){this.flash_nodes([t])}function yt(t){var e=Ot.cortona.Engine,i=null;try{i=e.Nodes.Item("VCR__PROTO__FLASHER")}catch(t){}null===i&&(i=e.CreateVrmlFromString('PROTO flasher[eventIn MFNode node]{DEF TS TimeSensor {loop TRUE enabled FALSE}DEF SC Script{eventIn\tSFTime inT eventIn MFNode inN IS node field SFNode tmr USE TS field MFNode ns []field MFNode ons []field SFTime st -1 field SFTime itv 1 field SFInt32 times 2 field SFBool actv FALSE field MFColor cs [] field MFColor ocs [] field SFTime tic -1 url "javascript: function getNs(val){ns.length=0;var t=0;var chs = [];for(var i=0; i<val.length; i++){chs.push(val[i]);}for(var i=0; i<chs.length; i++){if(chs[i] && chs[i].children){var ch = chs[i].children;for(var j=0; j<ch.length; j++){chs.push(ch[j]);}}if(chs[i] && chs[i].appearance && chs[i].appearance.material){ns[t]=chs[i];t++;}}}function inN(value){if(actv){stp(false);}getNs(value);var old = false;for(var i=0; i<ns.length; i++){for(var j=0; j<ons.length; j++){if(ons[j]==ns[i]){old = true;cs[i] = ocs[j];break;}}if(!old)cs[i] = ns[i].appearance.material.emissiveColor;}tmr.enabled = true;actv = true;st = -1;tic=-1;}function inT(v){tic=v;}function stp(stt){if(stt){tmr.enabled = false;actv = false;ons.length = 0;ocs.length = 0;}else{ons = ns;ocs = cs;}for(var i=0; i<ns.length; i++){ns[i].appearance.material.emissiveColor=cs[i];}ns.length = 0;cs.length = 0;}function eventsProcessed(){if(tic>0){if(st<0){st = tic;}var fr = (tic - st)/itv;if(fr>1){stp(true);}else{var c = Math.sin(times*Math.PI*fr);c = c * c;var clr = new SFColor(c, c, c);for(var i=0; i<ns.length; i++){ns[i].appearance.material.emissiveColor=clr;}}}}"}ROUTE TS.time TO SC.inT}DEF VCR__PROTO__FLASHER flasher{}').GetValue(0),e.RootNodes.Add(i));for(var n=e.CreateField("MFNode"),o=0;o<t.length;o++)try{n.Add(e.Nodes.Item(t[o]))}catch(t){}i.Fields.Item("node").Assign(n)}function bt(t,e){if(t.length>0){var i,n=this.cortona.Engine,o=[];for(i=0;i<t.length;i++)try{var r=n.Nodes.Item(t[i]);r&&"ObjectVM"==r.TypeName&&o.push(r)}catch(t){}var s=o.length;if(s>0){for(i=0;i<s;i++)o=o.concat(Ot._getAllChildren(o[i]));var a,c=n.CreateField("SFColor");for(n.AutoRefresh=0,i=0;i<o.length;i++)try{a=o[i].Fields.Item("appearance"),a.Value&&(a=a.Value.Fields.Item("material"),a.Value&&(c.Red=e[i][0],c.Green=e[i][1],c.Blue=e[i][2],a.Value.Fields.Item("diffuseColor").Assign(c)))}catch(t){}n.AutoRefresh=1}}}function Tt(t,e,i,n){if(t.length>0){var o,r=this.cortona.Engine,s=[];for(o=0;o<t.length;o++)try{var a=r.Nodes.Item(t[o]);a&&"ObjectVM"==a.TypeName&&s.push(a)}catch(t){}var c=s.length;if(c>0){for(o=0;o<c;o++)s=s.concat(Ot._getAllChildren(s[o]));var l,u=r.CreateField("SFColor");try{u.Red=e,u.Green=i,u.Blue=n}catch(t){}for(r.AutoRefresh=0,o=0;o<s.length;o++)try{l=s[o].Fields.Item("appearance"),l.Value&&(l=l.Value.Fields.Item("material"),l.Value&&l.Value.Fields.Item("diffuseColor").Assign(u))}catch(t){}r.AutoRefresh=1}}}function wt(t){var e=[];if(t.length>0){var i,n=this.cortona.Engine,o=[];for(i=0;i<t.length;i++)try{var r=n.Nodes.Item(t[i]);r&&"ObjectVM"==r.TypeName&&o.push(r)}catch(t){}var s=o.length;if(s>0){for(i=0;i<s;i++)o=o.concat(Ot._getAllChildren(o[i]));n.AutoRefresh=0;var a;for(i=0;i<o.length;i++)try{a=o[i].Fields.Item("appearance"),a.Value&&(a=a.Value.Fields.Item("material"),a.Value&&(e[i]=[a.Value.Fields.Item("diffuseColor").Red,a.Value.Fields.Item("diffuseColor").Green,a.Value.Fields.Item("diffuseColor").Blue]))}catch(t){}n.AutoRefresh=1}}return e}function Et(t,e,i,n){if(t.length>0){var o,r=this.cortona.Engine,s=[];for(o=0;o<t.length;o++)try{var a=r.Nodes.Item(t[o]);a&&"ObjectVM"==a.TypeName&&s.push(a)}catch(t){}var c=s.length;if(c>0){for(o=0;o<c;o++)s=s.concat(Ot._getAllChildren(s[o]));var l,u=r.CreateField("SFColor");try{u.Red=e,u.Green=i,u.Blue=n}catch(t){}for(r.AutoRefresh=0,o=0;o<s.length;o++)try{l=s[o].Fields.Item("appearance"),l.Value&&(l=l.Value.Fields.Item("material"),l.Value&&l.Value.Fields.Item("emissiveColor").Assign(u))}catch(t){}r.AutoRefresh=1}}}function Ct(t,e){if(t.length>0){var i,n=this.cortona.Engine,o=[];for(i=0;i<t.length;i++)try{var r=n.Nodes.Item(t[i]);r&&"ObjectVM"==r.TypeName&&o.push(r)}catch(t){}var s=o.length;if(s>0){for(i=0;i<s;i++)o=o.concat(Ot._getAllChildren(o[i]));var a;for(n.AutoRefresh=0,i=0;i<o.length;i++)try{a=o[i].Fields.Item("appearance"),a.Value&&(a=a.Value.Fields.Item("material"),a.Value&&(a.Value.Fields.Item("transparency").Value=e))}catch(t){}n.AutoRefresh=1}}}function At(t){if(t.length>0){var e,i=this.cortona.Engine,n=[];for(e=0;e<t.length;e++)try{var o=i.Nodes.Item(t[e]);o&&"ObjectVM"==o.TypeName&&n.push(o)}catch(t){}var r=n.length;if(r>0){for(e=0;e<r;e++)n=n.concat(Ot._getAllChildren(n[e]));var s;for(i.AutoRefresh=0,e=0;e<n.length;e++)try{if(s=n[e].Fields.Item("appearance"),s.Value&&(s=s.Value.Fields.Item("material"),s.Value))return s.Value.Fields.Item("transparency").Value}catch(t){}i.AutoRefresh=1}}}function St(t){var e=Ot.cortona.Engine,i=e.Nodes.Item(t),n=!1;if(i){var o=i.BboxSize;if(n=o.X>0||o.Y>0||o.Z>0)for(var r=i.Fields.Item("parent");r&&r.Value;){if(i=r.Value,i.Fields.Item("whichChoice").Value<0){n=!1;break}r=i.Fields.Item("parent")}}return n}function It(t){var e=[];try{for(var i=t.Fields.Item("children"),n=0;n<i.Count;n++){var o=i.GetValue(n);e.push(o),e=e.concat(Ot._getAllChildren(o))}}catch(t){}return e}function Ft(){if(this.is_loaded){var t,e,i=this.cortona.Engine,n=i.CameraPosition,o=i.NavigationInfo.Fields.Item("avatarSize"),r=this._createArrayFromField(n.Translation),s=this._createArrayFromField(n.Rotation);try{t=this.control_script.Fields.Item("minZoom").Value,e=this.control_script.Fields.Item("maxZoom").Value}catch(i){t=this.control_script.Nodes.Item("VCR_CONTROL_SCRIPT").Fields.Item("minZoom").Value,e=this.control_script.Nodes.Item("VCR_CONTROL_SCRIPT").Fields.Item("maxZoom").Value}return new Array(o.GetValue(3),o.GetValue(4),o.GetValue(5),r[0],r[1],r[2],s[0],s[1],s[2],s[3],t,e,0)}}n.prototype.load=a,n.prototype.unload=l,n.prototype.scene_loaded_on_start=c,n.prototype.vcr_play=u,n.prototype.vcr_play_ext=d,n.prototype.vcr_stop=h,n.prototype.vcr_pause=p,n.prototype.vcr_next_substep=v,n.prototype.vcr_previous_substep=g,n.prototype.vcr_next_step=f,n.prototype.vcr_previous_step=m,n.prototype.vcr_goto=_,n.prototype.vcr_set_range=y,n.prototype.vcr_set_position=b,n.prototype.vcr_set_seek_position=T,n.prototype.vcr_set_fraction=w,n.prototype.vcr_set_proc_fraction=E,n.prototype.vcr_set_step_fraction=C,n.prototype.vcr_get_fraction=A,n.prototype.vcr_get_proc_fraction=S,n.prototype.vcr_get_step_fraction=I,n.prototype.get_procedure_id=F,n.prototype.get_step_id=O,n.prototype.get_substep_id=x,n.prototype.set_speed_ratio=P,n.prototype.set_freeze_viewpoint=N,n.prototype.set_mute_audio=V,n.prototype.get_speed_ratio=M,n.prototype.get_freeze_viewpoint=L,n.prototype.set_ui_smoothcontrol=D,n.prototype.set_ui_axis=R,n.prototype.set_ui_vcr=B,n.prototype.set_ui_zoom=k,n.prototype.set_autostop_mode=H,n.prototype.zoom_reset=X,n.prototype.zoom_set_delta=j,n.prototype.zoom_set_level=z,n.prototype.set_guided_zoom=U,n.prototype.set_new_viewpoint=Y,n.prototype.get_viewpoint_data=Ft,n.prototype.fit_to_object=vt,n.prototype.fit_to_objects=gt,n.prototype._get_node_boundbox=mt,n.prototype.flash_node=_t,n.prototype.flash_nodes=yt,n.prototype.set_emissiveColor=Et,n.prototype.set_diffuseColor=Tt,n.prototype.set_transparency=Ct,n.prototype.get_transparency=At,n.prototype.get_diffuseColor=wt,n.prototype.set_original_diffuseColor=bt,n.prototype._getAllChildren=It,n.prototype.checkVisibility=St,n.prototype.get_steps_array=G,n.prototype.get_substeps_array=W,n.prototype.interactivity_xml_load=q,n.prototype.interactivity_xml_get_task=Z,n.prototype.interactivity_xml_get_subtasks=K,n.prototype.set_procedure=nt,n.prototype.set_multithread_procedure=ot,n.prototype._prepare_nonlinear_mode=it,n.prototype._preset_to_position=dt,n.prototype._form_substeps_list=lt,n.prototype._add_animation_substep=ut,n.prototype._clear_multithread_mode=at,n.prototype._prepare_multithread_animations=ct,n.prototype._corect_procedure_duration=rt,n.prototype._get_animation_duration=st,n.prototype._refresh=ht,n.prototype._check_alert=s,n.prototype._create_vector=pt,n.prototype._createArrayFromField=ft,n.prototype._advise_events=r;var Ot=null;n.prototype.attach=function(){if(!this.defaultHandler){var t=this;this.defaultHandler=function(e){e.detail.raw[0]&&t.scene_loaded_on_start()},this.cortona.addEventListener("OnSceneLoaded",this.defaultHandler,!1),console.log("SimulationAPI attached")}},n.prototype.detach=function(){this.defaultHandler&&(this.cortona.removeEventListener("OnSceneLoaded",this.defaultHandler,!1),delete this.defaultHandler,console.log("SimulationAPI detached"))},t.exports={SimulationAPI:n}},function(t,e,i){var n=i(0).defineClass,o=n(null,function(t){this.locals=t,i(18);var e=document.createElement("div");e.innerHTML=i(20)(t),document.body.appendChild(e.firstChild),this.content=document.getElementById("app-content"),this.panelDocument=document.getElementById("app-document"),this.panelFigure=document.getElementById("app-figure")},{addDocumentView:function(t,e){return e&&(this.panelDocument.innerHTML="",this.panelDocument.appendChild(e),e.classList.add("document")),this.viewDocument=t,this.viewDocument.initialize(this.panelDocument,this.locals),this.viewDocument.addApplicFilter(this,this.locals),t},addFigureView:function(t){return this.viewFigure=t,this.viewFigure.initialize(this.panelFigure,this.locals),t},showFigure:function(t){var e=this.content.classList;e.remove("app-switch-1d"),e.remove("app-switch-2d"),e.remove("app-switch-3d"),e.add("app-switch-"+t.toLowerCase()),e.remove("maximized")},maximized:function(){var t=this.content.classList;t.remove("app-switch-1d"),t.remove("app-switch-2d"),t.remove("app-switch-3d"),t.add("maximized")}});t.exports=o},function(t,e){},function(t,e){function i(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=u[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(s(n.parts[r],e))}else{for(var a=[],r=0;r<n.parts.length;r++)a.push(s(n.parts[r],e));u[n.id]={id:n.id,refs:1,parts:a}}}}function n(t){for(var e=[],i={},n=0;n<t.length;n++){var o=t[n],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};i[r]?i[r].parts.push(l):e.push(i[r]={id:r,parts:[l]})}return e}function o(){var t=document.createElement("style"),e=p();return t.type="text/css",e.appendChild(t),t}function r(){var t=document.createElement("link"),e=p();return t.rel="stylesheet",e.appendChild(t),t}function s(t,e){var i,n,s;if(e.singleton){var u=m++;i=f||(f=o()),n=a.bind(null,i,u,!1),s=a.bind(null,i,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=r(),n=l.bind(null,i),s=function(){i.parentNode.removeChild(i),i.href&&URL.revokeObjectURL(i.href)}):(i=o(),n=c.bind(null,i),s=function(){i.parentNode.removeChild(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}function a(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function c(t,e){var i=e.css,n=e.media;e.sourceMap;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function l(t,e){var i=e.css,n=(e.media,e.sourceMap);n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var u={},d=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},h=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=d(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,m=0;t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=h());var o=n(t);return i(o,e),function(t){for(var r=[],s=0;s<o.length;s++){var a=o[s],c=u[a.id];c.refs--,r.push(c)}if(t){i(n(t),e)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete u[c.id]}}}};var v=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){function n(t){var e="",i=t||{};return function(t){var i=t["3DFrameSize"]+"%",n=100-t["3DFrameSize"]+"%",r="layout-"+t["3DFramePosition"];e=e+"<div"+o.attr("class",o.classes(["app-content","maximized",r],[!1,!1,!0]),!1,!0)+' id="app-content"><div class="app-panel" id="app-document"'+o.attr("style",o.style({width:n,height:n,visibility:"0%"===n?"hidden":"visible"}),!0,!0)+'><div id="no-document">No document</div></div><div class="app-panel" id="app-figure"'+o.attr("style",o.style({width:i,height:i}),!0,!0)+"></div></div>"}.call(this,"options"in i?i.options:"undefined"!=typeof options?options:void 0),e}var o=i(3);t.exports=n},function(t,e){},function(t,e,i){var n=i(0).defineClass,o=i(7),r=i(6),s=n(o,function(t){s.superClass.call(this,t)},{initialize:function(t,e){i(23),t.innerHTML=i(24)(e),this.constructor.superClass.prototype.initialize.call(this,t)},getScene:function(t){return r(document.getElementById("scene"+t.toLowerCase()))},disableControlsGroup:function(t){var e=document.getElementById(t||"figure3d");return e&&this.toggleFormElements(e,"disabled",!0),this},enableControlsGroup:function(t){var e=document.getElementById(t||"figure3d");return e&&this.toggleFormElements(e,"disabled",!1),this},onVCRControlStateChanged:function(t){var e=document.getElementById("navigation-bar").classList;return e.remove("vcr-state-stop"),e.remove("vcr-state-play"),e.remove("vcr-state-pause"),e.add("vcr-state-"+["stop","play","pause"][t]),this}});t.exports=s},function(t,e){},function(t,e,i){function n(t){var e,i="",n=t||{};return function(t,n,r,s,a,c,l,u,d,h,p,f,m,v,g,_,y,b,T,w,E,C){i+='<div class="app-bar" id="title-bar"><div class="left"><div id="app-figure-title"></div></div><div class="right">',w&&(i=i+'<button class="link" data-link="help"'+o.attr("title",l,!0,!0)+">?</button>"),i=i+'<button class="link" data-link="close"'+o.attr("title",c,!0,!0)+"></button></div></div>",2!=E.IllustrationType&&(i=i+'<div class="app-frame" id="figure3d"><div class="app-scene" id="scene3d"'+o.attr("style",o.style({bottom:E.ShowSmoothControl?"21mm":"9mm"}),!0,!0)+"></div>",E.ShowSmoothControl&&(i=i+'<div class="app-bar" id="seek-bar"'+o.attr("style",o.style({height:"12mm"}),!0,!0)+'><input id="seek" type="range" min="0" max="100" value="0" step="0.1" disabled></div>'),i=i+'<div class="app-bar vcr-state-stop" id="navigation-bar"><div class="left"><button class="link" data-link="play"'+o.attr("title",h,!0,!0)+o.attr("disabled",!0,!0,!0)+">"+o.escape(null==(e=r)?"":e)+'</button><button class="link" data-link="pause"'+o.attr("title",d,!0,!0)+o.attr("disabled",!0,!0,!0)+">"+o.escape(null==(e=n)?"":e)+'</button><button class="link" data-link="stop"'+o.attr("title",f,!0,!0)+o.attr("disabled",!0,!0,!0)+">"+o.escape(null==(e=a)?"":e)+"</button>",!E.ShowPrevNextButtons||!0!==E["3DStepsAutoBinding"]&&void 0!==E["3DStepsAutoBinding"]||(i=i+'<span id="btn_group_prevnext"><button class="link" id="btn_prev" data-link="prev"'+o.attr("title",p,!0,!0)+o.attr("disabled",!0,!0,!0)+">"+o.escape(null==(e=s)?"":e)+'</button><button class="link" id="btn_next" data-link="next"'+o.attr("title",u,!0,!0)+o.attr("disabled",!0,!0,!0)+">"+o.escape(null==(e=t)?"":e)+"</button></span>"),i+='</div><div class="right">',E.ShowAutostopBox&&(i=i+'<span id="show-autostop"><label for="autostopbox">'+o.escape(null==(e=m)?"":e)+'</label><input class="link" id="autostopbox" data-link="autostop" type="checkbox"'+o.attr("disabled",!0,!0,!0)+o.attr("checked",E.EnableAutostop,!0,!0)+"></span>"),E.ShowMessagesBox&&(i=i+'<span id="show-messages"><label for="warningbox">'+o.escape(null==(e=g)?"":e)+'</label><input id="enable-notes" type="checkbox"'+o.attr("disabled",!0,!0,!0)+o.attr("checked",E.EnableWarnings,!0,!0)+"></span>"),E.ShowFreezeCheckbox&&(i=i+'<span id="freeze-viewpoint"><label for="vpfreeze">'+o.escape(null==(e=v)?"":e)+'</label><input id="vpfreeze" type="checkbox" disabled></span>'),E.ShowSpeedSelection&&(i=i+'<span id="procedure-speed"><label for="speed-selector"'+o.attr("title",C,!0,!0)+">"+o.escape(null==(e=_)?"":e)+'</label><select id="speed-selector" disabled><option value="0.5">'+o.escape(null==(e=y)?"":e)+'</option><option value="1" selected>'+o.escape(null==(e=b)?"":e)+'</option><option value="2">'+o.escape(null==(e=T)?"":e)+"</option></select></span>"),i+="</div></div></div>"),1!=E.IllustrationType&&(i+='<div class="app-frame" id="figure2d"><div class="app-scene" id="scene2d"></div></div>'),i+='<div class="app-frame" id="figure1d"><div class="app-scene" id="scene1d"></div></div>'}.call(this,"BTN_NEXT"in n?n.BTN_NEXT:"undefined"!=typeof BTN_NEXT?BTN_NEXT:void 0,"BTN_PAUSE"in n?n.BTN_PAUSE:"undefined"!=typeof BTN_PAUSE?BTN_PAUSE:void 0,"BTN_PLAY"in n?n.BTN_PLAY:"undefined"!=typeof BTN_PLAY?BTN_PLAY:void 0,"BTN_PREV"in n?n.BTN_PREV:"undefined"!=typeof BTN_PREV?BTN_PREV:void 0,"BTN_STOP"in n?n.BTN_STOP:"undefined"!=typeof BTN_STOP?BTN_STOP:void 0,"BTN_TITLE_CLOSE"in n?n.BTN_TITLE_CLOSE:"undefined"!=typeof BTN_TITLE_CLOSE?BTN_TITLE_CLOSE:void 0,"BTN_TITLE_HELP"in n?n.BTN_TITLE_HELP:"undefined"!=typeof BTN_TITLE_HELP?BTN_TITLE_HELP:void 0,"BTN_TITLE_NEXT"in n?n.BTN_TITLE_NEXT:"undefined"!=typeof BTN_TITLE_NEXT?BTN_TITLE_NEXT:void 0,"BTN_TITLE_PAUSE"in n?n.BTN_TITLE_PAUSE:"undefined"!=typeof BTN_TITLE_PAUSE?BTN_TITLE_PAUSE:void 0,"BTN_TITLE_PLAY"in n?n.BTN_TITLE_PLAY:"undefined"!=typeof BTN_TITLE_PLAY?BTN_TITLE_PLAY:void 0,"BTN_TITLE_PREV"in n?n.BTN_TITLE_PREV:"undefined"!=typeof BTN_TITLE_PREV?BTN_TITLE_PREV:void 0,"BTN_TITLE_STOP"in n?n.BTN_TITLE_STOP:"undefined"!=typeof BTN_TITLE_STOP?BTN_TITLE_STOP:void 0,"TXT_AUTOSTOP"in n?n.TXT_AUTOSTOP:"undefined"!=typeof TXT_AUTOSTOP?TXT_AUTOSTOP:void 0,"TXT_FREEZE_VP"in n?n.TXT_FREEZE_VP:"undefined"!=typeof TXT_FREEZE_VP?TXT_FREEZE_VP:void 0,"TXT_MESSAGES"in n?n.TXT_MESSAGES:"undefined"!=typeof TXT_MESSAGES?TXT_MESSAGES:void 0,"TXT_SPEED"in n?n.TXT_SPEED:"undefined"!=typeof TXT_SPEED?TXT_SPEED:void 0,"TXT_SPEED1"in n?n.TXT_SPEED1:"undefined"!=typeof TXT_SPEED1?TXT_SPEED1:void 0,"TXT_SPEED2"in n?n.TXT_SPEED2:"undefined"!=typeof TXT_SPEED2?TXT_SPEED2:void 0,"TXT_SPEED3"in n?n.TXT_SPEED3:"undefined"!=typeof TXT_SPEED3?TXT_SPEED3:void 0,"helpFile"in n?n.helpFile:"undefined"!=typeof helpFile?helpFile:void 0,"options"in n?n.options:"undefined"!=typeof options?options:void 0,"titleSpeed"in n?n.titleSpeed:"undefined"!=typeof titleSpeed?titleSpeed:void 0),i}var o=i(3);t.exports=n},function(t,e,i){var n=i(0).defineClass,o=i(7),r=n(o,function(){this.activeNode=null,this.holder=null,r.superClass.apply(this,arguments)},{initialize:function(t,e){i(26),this.highlightColor=e.options.HighlightedStepColor,this.holder=t,r.superClass.prototype.initialize.call(this,t,function(t){return("2"!==e.options.IllustrationType||"link3d"!==t)&&("1"!==e.options.IllustrationType||"link2d"!==t)})},isHidden:function(t){return!t.offsetWidth&&!t.offsetHeight},isVisible:function(t,e){var i,n,o,r,s;for(o=t,i=0;o&&o!=this.holder;o=o.offsetParent)i+=o.offsetLeft;for(o=t,n=0;o&&o!=this.holder;o=o.offsetParent)n+=o.offsetTop;if(!o)return!0;for(o=t,r=0;o&&o!=this.holder&&!r;o=o.offsetParent)r=o.scrollTop;for(o=t,s=0;o&&o!=this.holder&&!s;o=o.offsetParent)s=o.scrollLeft;var a=t.offsetWidth,c=t.offsetHeight,l=this.holder.clientWidth,u=this.holder.clientHeight;return n>=r&&n+c<=r+u&&(!e||i>=s&&i+a<=s+l)},setActiveNode:function(t,e){return this.activeNode=document.getElementById(t),this.activeNode&&(this.isVisible(this.activeNode)||this.activeNode.scrollIntoView(!1)),this},highlight:function(){return this.activeNode&&(this.activeNode.style.backgroundColor=this.highlightColor),this},unhighlight:function(){return this.activeNode&&(this.activeNode.style.backgroundColor=""),this},addApplicFilter:function(t,e){function i(){this.filterObject={},this.initialize=function(i){function n(){p.style.visibility=s?"hidden":"visible",d.value=s?e.TXT_BTN_OPEN||"Open":e.TXT_BTN_CLOSE||"Close",s=!s}function o(){for(var e=a.filterObject.getExcludeNodes(),i=document.querySelectorAll(".filterHide"),n=0;n<i.length;n++)i[n].classList.remove("filterHide");for(var n=0;n<e.length;n++)e[n].classList.add("filterHide");var o=t.viewDocument.link2dNode&&t.viewDocument.link2dNode.getAttribute("data-src");t.viewDocument.checkGraphicStateAfterFilter(o)||t.viewFigure.handlers.close(),u.classList.add("active"),h.disabled=!1}function r(){a.filterObject.setDefaultValue(a.filterObject.HTMLElement);for(var t=document.querySelectorAll(".filterHide"),e=0;e<t.length;e++)t[e].classList.remove("filterHide");u.classList.remove("active"),h.disabled=!0}var s=!1,a=this;a.filterObject=i;var c=document.getElementById("app-document"),l=document.createElement("div");l.classList.add("app-bar-filter"),c.insertBefore(l,c.firstChild);var u=l.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(e.TXT_LABEL_FILTER||"Filter:"));var d=document.createElement("input");d.setAttribute("type","button"),d.value=e.TXT_BTN_OPEN||"Open",l.appendChild(d);var h=document.createElement("input");h.setAttribute("type","button"),h.value=e.TXT_BTN_CLEAR||"Clear",h.disabled=!0,l.appendChild(h),d.addEventListener("click",n),h.addEventListener("click",r);var p=a.filterObject.HTMLElement;l.appendChild(p),a.filterObject.setApplyHandler(o)}}function n(t){this.attribute=t.getAttribute("data-filter-attr"),this.value=t.getAttribute("data-filter-value"),this.action=t.getAttribute("data-filter-action")}function o(t){return t.classList.contains("assert")?new c(t):t.classList.contains("evaluate")?new a(t):new l}function r(){var t=document.querySelector(".referencedApplicGroup");if(!t)return{};t.parentNode.removeChild(t),this.products=[],this.fillProducts=function(){this.products=[];for(var e=t.querySelectorAll(".applic"),i=0;i<e.length;i++){var n=new s(e[i]);this.addProduct(n)}},this.addProduct=function(t){t.id&&this.products.push(t)},this.setDefaultValue=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);this.fillProducts();for(var e=0;e<this.products.length;e++)t.appendChild(this.products[e].toHTMLFilter(this.applyHandler));return t},this.HTMLElement=function(t){var e=document.createElement("div");return e.classList.add("filter"),t.setDefaultValue(e),e}(this),this.getExcludeNodes=function(){for(var t=this.HTMLElement.querySelectorAll(".filter__row"),e=[],i=0;i<t.length;i++){var o=new n(t[i]);if("exclude"==o.action)for(var r="*["+o.attribute+'="'+o.value+'"]',s=document.querySelectorAll(r),a=0;a<s.length;a++)e.push(s[a])}return e},this.setApplyHandler=function(t){this.applyHandler=t}}function s(t){if(!t.id)return{};this.id=t.id,this.expression=o(t.lastElementChild),this.displayText=function(e){return t.querySelector(".simplePara")?res=t.querySelector(".simplePara").innerText.replace(/\n/,""):res=e.expression.toString(),res}(this),this.toString=function(){return"id: "+this.id+" value: "+this.expression.toString()},this.toHTMLFilter=function(t){function i(t,e,i){var n=document.createElement(t);if(e)for(var o=e.replace(/\s+/," ").split(" "),r=0;r<o.length;r++)n.classList.add(o[r]);return i&&(n.innerHTML=i),n}function n(){var e=c.selectedIndex,i=c.options[e].value;o.setAttribute("data-filter-action",i),t&&t()}var o=i("div","filter__row");o.setAttribute("data-filter-attr","data-applicrefid"),o.setAttribute("data-filter-value",this.id),o.setAttribute("data-filter-action","include");var r=i("div","filter__attribute",this.id),s=i("div","filter__value",this.displayText),a=i("div","filter__action"),c=document.createElement("select"),l=new Option(e.TXT_OPT_EXCLUDE||"Exclude","exclude"),u=new Option(e.TXT_OPT_INCLUDE||"Include","include");return u.defaultSelected=!0,u.selected=!0,c.appendChild(l),c.appendChild(u),c.addEventListener("change",n),a.appendChild(c),o.appendChild(r),o.appendChild(s),o.appendChild(a),o}}function a(t){this.andOr=t.getAttribute("data-andOr"),this.expression=function(){for(var e=[],i=t.children,n=0;n<i.length;n++){var r=o(i[n]);e.push(r)}return e}(),this.toString=function(){return"{"+this.expression.join(" "+this.andOr+" ")+"}"}}function c(t){this.applicPropertyIdent=t.getAttribute("data-applicPropertyIdent"),this.applicPropertyValues=function(){for(var e=[],i=t.getAttribute("data-applicPropertyValues"),n=i.split("|"),o=0;o<n.length;o++)if(~n[o].indexOf("~")){var r=n[o].split("~").map(function(t){return Number(t)});e.push(new u(!1,r[0],r[1]))}else e.push(new u(n[o]));return e}(),this.toString=function(){return"{%1: [%2]}".replace(/%1/,this.applicPropertyIdent).replace(/%2/,this.applicPropertyValues.join(","))}}function l(){this.all=!0}function u(t,e,i){t&&(this.single=t),e&&i&&(this.start=e,this.end=i),this.toString=function(){return this.single?this.single:this.start+"~"+this.end}}function d(){this.ATTRIBUTES=["audience","product","platform","props","otherprops"],this.props=[],this.fillProps=function(){this.props=[];for(var t=0;t<this.ATTRIBUTES.length;t++)for(var e="data-"+this.ATTRIBUTES[t],i=document.querySelectorAll("*["+e+"]"),n=0;n<i.length;n++)for(var o=i[n].getAttribute(e).replace(/(^\s+|\s+$)/,"").replace(/\s+/g," "),r=o.split(" "),s=0;s<r.length;s++){var a=new h(this.ATTRIBUTES[t],r[s],"");this.addProp(a)}},this.addProp=function(t){for(var e=!1,i=0;i<this.props.length;i++)if(this.props[i].attr==t.attr&&this.props[i].value==t.value&&this.props[i].action==t.action){e=!0;break}e||this.props.push(t)},this.setDefaultValue=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);this.fillProps();for(var e=0;e<this.props.length;e++)t.appendChild(this.props[e].toHTMLFilter(this.applyHandler));return t},this.HTMLElement=function(t){var e=document.createElement("div");return e.classList.add("filter"),e=t.setDefaultValue(e)}(this),this.getExcludeNodes=function(){function t(){this.map=[],this.addToMap=function(t){this.map.push(t)},this.getActionForAttrAndValue=function(t,e){for(var i="",n=0;n<this.map.length;n++)this.map[n].attribute==t&&this.map[n].value==e&&(i=this.map[n].action);return i}}for(var e=new t,i=this.HTMLElement.querySelectorAll(".filter__row"),o=0;o<i.length;o++){var r=new n(i[o]);e.addToMap(r)}for(var s="",o=0;o<this.ATTRIBUTES.length;o++){s+="*[data-"+this.ATTRIBUTES[o]+"]",o!=this.ATTRIBUTES.length-1&&(s+=", ")}var a=document.querySelectorAll(s),c=[];t:for(var o=0;o<a.length;o++)for(var l=a[o],u=0;u<this.ATTRIBUTES.length;u++)if(l.getAttribute("data-"+this.ATTRIBUTES[u])){for(var d=this.ATTRIBUTES[u],h=l.getAttribute("data-"+d).replace(/(^\s+|\s+$)/,"").replace(/\s+/g," ").split(" "),p=!1,f=0;f<h.length;f++){var m=e.getActionForAttrAndValue(d,h[f]);"include"==m&&(p=!0)}if(!p){c.push(l);continue t}}return c},this.setApplyHandler=function(t){this.applyHandler=t}}function h(t,i,n){var o={include:!0,exclude:!0},r="include";this.attr=t,this.value=i,this.action=function(t){return n&&o[t]?t:r}(n),this.toHTMLFilter=function(t){function i(t,e,i){var n=document.createElement(t);if(e)for(var o=e.replace(/\s+/," ").split(" "),r=0;r<o.length;r++)n.classList.add(o[r]);return i&&(n.innerHTML=i),n}function n(){var e=l.selectedIndex,i=l.options[e].value;o.setAttribute("data-filter-action",i),t&&t()}var o=i("div","filter__row");o.setAttribute("data-filter-attr",this.attr),o.setAttribute("data-filter-value",this.value),o.setAttribute("data-filter-action",this.action);var s=i("div","filter__attribute",this.attr),a=i("div","filter__value",this.value),c=i("div","filter__action"),l=document.createElement("select"),u=new Option(e.TXT_OPT_EXCLUDE||"Exclude","exclude"),d=new Option(e.TXT_OPT_INCLUDE||"Include","include");return"include"==r?(d.defaultSelected=!0,d.selected=!0):(u.defaultSelected=!0,u.selected=!0),l.appendChild(u),l.appendChild(d),l.addEventListener("change",n),c.appendChild(l),o.appendChild(s),o.appendChild(a),o.appendChild(c),o}}var p={},f=document.getElementById("app-document"),m=new r,v=new d;if(m.products)p=m;else{if(!v.props.length)return void f.classList.remove("app-filter");p=v}(new i).initialize(p),f.classList.add("app-filter"),p.setDefaultValue(p.HTMLElement)},checkGraphicStateAfterFilter:function(t){var e=!0;if(!t)return e;var i=document.querySelector('*.graphic[data-src = "'+t+'"]');if(!i)return e;do{if(i.classList.contains("filterHide")){e=!1;break}i=i.parentNode}while(i.parentNode);return e}});t.exports=r},function(t,e){},function(t,e,i){var n=i(0).defineClass,o=i(1),r=i(2);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"fps",["OnFrameRateMeasured"])},{create:function(t){return new(n(r,function(t,e){this.constructor.superClass.call(this,t);var i=document.createElement("div");i.setAttribute("id",t.getNextId()),i.style.position="absolute",i.style.bottom=0,i.style.right=0,i.style.fontSize="4em",i.style.fontWeight="bold",i.style.width="4em",i.style.height="2em",i.style.zIndex="100",this.instance=i,this.hide(),e.appendChild(i),this.fps=0;this.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.ieRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),this.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.ieCancelAnimationFrame||window.clearTimeout}(),this.now=function(){return Date.now()/1e3}},{attach:function(t){var e=this;this.then=this.now(),this.fpsAcc=0,this.fpsCount=0,this.fpsTime=this.then;var i=function(){var t=e.now(),n=t-e.then;e.then=t,0!==n&&(e.fpsAcc+=1/n,e.fpsCount++,t-e.fpsTime>.5&&(e.fps=(e.fpsAcc/e.fpsCount).toFixed(2),e.instance.innerHTML=e.fps,e.trigger("OnFrameRateMeasured",{raw:[e.fps],src:e}),e.fpsTime=t,e.fpsCount=0,e.fpsAcc=0)),e.requestAnimFrame.call(window,i)};return this.requestId=this.requestAnimFrame.call(window,i),this},detach:function(){return this.requestId&&(this.cancelAnimFrame.call(window,this.requestId),delete this.requestId),this},show:function(){return this.instance.style.display="block",this},hide:function(){return this.instance.style.display="none",this}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(0).defineClass,o=i(0).expand,r=i(1),s=i(8);t.exports=new(n(r,function(){this.constructor.superClass.call(this,"popupmenu",[]),this.menuTemplate={items:[]}},{setMenuTemplate:function(t){return this.menuTemplate={items:t||[]},this},create:function(t){return new(n(s,function(t,e){var n=i(29)(t.menuTemplate),r=i(30);this.menuTemplate=o({},t.menuTemplate),this.constructor.superClass.call(this,t,e,n,r),this.instance.style.zIndex+=10},{attach:function(){var t=this;return this.instance.contentWindow.onfocus=function(){clearTimeout(t.deferredHiding)},this.menuTemplate.items.forEach(function(e,i){e&&"function"==typeof e.action&&(t.content.firstChild.children[i].onclick=function(){t.hide(),e.action.call(this)})}),this},detach:function(){return clearTimeout(this.deferredHiding),this},close:function(){clearTimeout(this.deferredHiding);var t=this;this.deferredHiding=setTimeout(function(){t.hide()},0)}}))(this,t.container)}}))},function(t,e,i){function n(t){var e,i="",n=t||{};return function(t){i+='<div class="menu-popup"><ul>',function(){var n=t;if("number"==typeof n.length)for(var r=0,s=n.length;r<s;r++){var a=n[r];a?i=i+"<li"+o.attr("class",o.classes([{disabled:!a.action}],[!0]),!1,!0)+">"+o.escape(null==(e=a.description)?"":e)+"</li>":i+="<hr>"}else{var s=0;for(var r in n){s++;var a=n[r];a?i=i+"<li"+o.attr("class",o.classes([{disabled:!a.action}],[!0]),!1,!0)+">"+o.escape(null==(e=a.description)?"":e)+"</li>":i+="<hr>"}}}.call(this),i+="</ul></div>"}.call(this,"items"in n?n.items:"undefined"!=typeof items?items:void 0),i}var o=i(3);t.exports=n},function(t,e,i){e=t.exports=i(4)(),e.push([t.i,".menu-popup {\n  position: absolute;\n  border: 0.25mm solid #A7A7A7;\n  background-color: #F2F2F2;\n  display: inline-block;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.menu-popup ul {\n  display: block;\n  margin: 0.7mm;\n  padding: 0 0 0 0;\n}\n.menu-popup ul li {\n  display: block;\n  text-indent: 5mm;\n  padding: 0.7mm;\n  padding-right: 3mm;\n  margin: 0;\n  font-family: Verdana, sans-serif;\n  font-size: 2.82mm;\n  white-space: nowrap;\n}\n.menu-popup ul li:hover {\n  background-color: #91C9F7;\n  cursor: pointer;\n}\n.menu-popup ul li.disabled {\n  color: gray;\n}\n.menu-popup ul hr {\n  margin: 0.7mm;\n  border: none;\n  color: #E2E2E2;\n  background-color: #E2E2E2;\n  height: 0.25mm;\n}\n",""])},function(t,e,i){var n=i(0).defineClass,o=i(1),r=i(8);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"alert",["OnAlertActivated","OnAlertDismiss","OnAlertClosed"]),this.alertType={ALERT:0,WARNING:1,CAUTION:2,NOTE:3}},{create:function(t){return new(n(r,function(t,e){var n=i(32)(),o=i(33);this.constructor.superClass.call(this,t,e,n,o)},{attach:function(){var t=this.instance,e=this.head;Array.prototype.slice.call(document.getElementsByTagName("style")).forEach(function(i){e.appendChild(t.contentDocument.createElement("style")).innerHTML=i.innerHTML}),Array.prototype.slice.call(document.getElementsByTagName("link")).forEach(function(t){"stylesheet"==t.rel&&e.appendChild(t.cloneNode(!0))}),this.frameType=this.content.firstChild,this.frame=this.frameType.firstChild,this.alertCaption=this.frame.firstChild,this.alertBody=this.alertCaption.nextSibling,this.alertFooter=this.alertBody.nextSibling,this.activated=!1;var i=this;return this.alertFooter.getElementsByTagName("button")[0].onclick=function(){i.trigger("OnAlertClosed"),i.hide()},this},show:function(){return this.activated=!0,this.constructor.superClass.prototype.show.call(this),this.trigger("OnAlertActivated"),this},hide:function(){return this.instance.classList.remove("activated"),this.constructor.superClass.prototype.hide.call(this),this.activated&&this.trigger("OnAlertDismiss"),this.activated=!1,this},message:function(t,e,i){return this.isLoaded()||this.instance.onload(),this.frameType.className="alert-message-type-"+t,this.alertBody.innerHTML="","string"==typeof i?this.alertBody.appendChild(document.createTextNode(i)):"object"==typeof i&&i&&i.innerHTML&&(this.alertBody.innerHTML="",this.alertBody.appendChild(i.cloneNode(!0))),"string"==typeof e&&(this.alertCaption.innerHTML="",this.alertCaption.appendChild(document.createTextNode(e)),this.alertCaption.style.display=e?"":"none"),this.onresize(),this},onresize:function(){this.constructor.superClass.prototype.onresize.call(this,"80%");var t=this.instance.parentNode.offsetHeight,e=this.instance.parentNode.offsetWidth,i=this.instance.offsetHeight,n=this.instance.offsetWidth;return this.setPosition((e-n)/2,(t-i)/2),this}}))(this,t.container)}}))},function(t,e,i){function n(t){var e="";return e+='<div class="alert-message"><div><div class="alert-message-frame"><div class="alert-message-caption"></div><div class="alert-message-body"></div><div class="alert-message-footer"><button>Close</button></div></div></div></div>'}i(3);t.exports=n},function(t,e,i){e=t.exports=i(4)(),e.push([t.i,".alert-message > div {\n  padding: 5mm;\n}\n.alert-message .alert-message-frame {\n  border: 0.7mm solid black;\n  background-color: white;\n}\n.alert-message .alert-message-frame .alert-message-caption {\n  text-align: center;\n  padding: 5mm 2.5mm 2.5mm 2.5mm;\n  font-weight: bold;\n}\n.alert-message .alert-message-frame .alert-message-body {\n  text-align: center;\n  padding: 5mm 2.5mm 2.5mm 2.5mm;\n}\n.alert-message .alert-message-frame .alert-message-body .p {\n  text-align: center;\n}\n.alert-message .alert-message-frame .alert-message-footer {\n  text-align: center;\n  padding: 5mm 2.5mm;\n}\n.alert-message .alert-message-frame .alert-message-footer button {\n  width: 20mm;\n  height: 7mm;\n  font-size: 4mm;\n}\n.alert-message-type-0 {\n  background-color: cornflowerblue;\n}\n.alert-message-type-1 {\n  background-color: red;\n}\n.alert-message-type-2 {\n  background-color: darkorange;\n}\n.alert-message-type-3 {\n  background-color: lightsteelblue;\n}\n",""])},function(t,e,i){var n=i(0).defineClass,o=i(1),r=i(2);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"error",[])},{create:function(t){return new(n(r,function(t,e){this.constructor.superClass.call(this,t);var i=document.createElement("div");i.setAttribute("id",t.getNextId()),i.className="error-message",i.appendChild(document.createElement("div")).className="error-message-body",e.appendChild(i),this.instance=i,this.body=this.instance.firstChild,this.container=e},{attach:function(){return this.container.classList.add("error"),this},detach:function(){return this.container.classList.remove("error"),this},message:function(t){this.body.innerHTML="";for(var e=0;e<arguments.length;e++){var i=arguments[e].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\[([^\[\]]*)]/g,function(t,e){var i=e.split("|");return'<a href="'+(i.length>1?i[1]:i[0])+'">'+i[0]+"</a>"});this.body.appendChild(document.createElement("div")).innerHTML=i}return this}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(0).defineClass,o=i(1),r=i(2);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"loading",[])},{create:function(t){return new(n(r,function(t,e){this.constructor.superClass.call(this,t),i(36);var n=document.createElement("div");n.innerHTML=i(38)();var o=n.firstChild;o.setAttribute("id",t.getNextId()),o.classList.add("loading-indicator"),e.appendChild(o),this.instance=o,this.container=e},{attach:function(){return this.container.classList.add("wait"),this},detach:function(){return this.container.classList.remove("wait"),this},show:function(){return this.container.classList.add("wait"),this},hide:function(){return this.container.classList.remove("wait"),this}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(37);"string"==typeof n&&(n=[[t.i,n,""]]);i(19)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,i){e=t.exports=i(4)(),e.push([t.i,".loading-indicator {\n  position: relative;\n  width: 40mm;\n  height: 40mm;\n  text-align: center;\n}\n.loading-indicator div {\n  width: 40mm;\n  height: 40mm;\n  margin: 0 auto;\n  border: 2mm solid #ebebeb;\n  border-radius: 50%;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  animation: cssload-spin 0.7s infinite linear;\n  -o-animation: cssload-spin 0.7s infinite linear;\n  -ms-animation: cssload-spin 0.7s infinite linear;\n  -webkit-animation: cssload-spin 0.7s infinite linear;\n  -moz-animation: cssload-spin 0.7s infinite linear;\n}\n@keyframes cssload-spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@-o-keyframes cssload-spin {\n  100% {\n    -o-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-ms-keyframes cssload-spin {\n  100% {\n    -ms-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes cssload-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-moz-keyframes cssload-spin {\n  100% {\n    -moz-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",""])},function(t,e,i){function n(t){var e="";return e+='<div class="loading-indicator"><div></div></div>'}i(3);t.exports=n},function(t,e,i){var n=i(0).defineClass,o=i(1),r=i(2);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"iframe",["DocumentComplete"])},{create:function(t){return new(n(r,function(t,e){this.constructor.superClass.call(this,t),this.isIE=!window.ActiveXObject&&"ActiveXObject"in window;var i=document.createElement("iframe");i.setAttribute("id",t.getNextId()),i.style.border="none",this.instance=i,this.hide(),e.appendChild(i);var n=this;this.instance.onload=function(t){t=t||window.event,n.trigger("DocumentComplete",{raw:[n.instance.src],src:t})}},{load:function(t){return this.instance.src=t,this.isIE&&this.trigger("DocumentComplete",{raw:[t]}),this},unload:function(){return this.instance.src="",this},highlight:function(t,e){return this},unhighlight:function(t,e){return this},select:function(t,e){return this},unselect:function(t,e){return this},reset:function(){return this}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(0).defineClass,o=i(0).fromHTMLColor,r=i(1),s=i(5);t.exports=new(n(r,function(){this.constructor.superClass.call(this,"viewer2d",["HotspotHit","HotspotEnter","HotspotLeave","HotspotMenu","HotspotMenuSelect","DocumentComplete"])},{create:function(t){return new(n(s,function(t,e){this.constructor.superClass.call(this,t,e,"CLSID:1D4A81CB-25A3-4EB7-A75E-4F8A5386D8F8","application/x-rapidview",t.events)},{getSVGSource:function(){var t="";return this.isValid()&&(t=this.instance.getSVGSource()),t},version:function(){if(this.isValid())return"Cortona2D Viewer "+this.instance.GetVersion()},highlight:function(t,e){var i=[],n=this.instance;try{i=n.GetHotspotIDs(t).toArray()}catch(t){}return i.forEach(function(t){n.HighlightHotspot(t,!0,o(e))}),this},unhighlight:function(t,e){var i=[],n=this.instance;try{i=n.GetHotspotIDs(t).toArray()}catch(t){}return i.forEach(function(t){n.HighlightHotspot(t,!1,o(e))}),this},select:function(t,e){return this.highlight(t,e),this},unselect:function(t,e){return this.unhighlight(t,e),this},reset:function(){return this.instance.ResetView(),this},scaleBy:function(t){return this},exists:function(t){var e=[],i=this.instance;try{e=i.GetHotspotIDs(t).toArray()}catch(t){}return e.length>0}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(0).defineClass,o=(i(0).fromHTMLColor,i(1)),r=i(5);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"viewer3d",["Click","DblClick","MouseDown","MouseMove","OnMouseEnter","MouseUp","OnMouseOut","OnDrag","OnDrop","OnKeyDown","OnKeyUp","OnSceneLoaded","OnSceneUnloaded","OnAnchor","OnCameraMove","OnFrameRateMeasured"]),this.skins={default:"{1706B265-E103-4332-9871-7FEE6C37C699}","default-5.1":"{04B2095C-3E09-4519-B5D4-838BDC622661}","default-orange":"{0009E838-FFDF-4f38-94DB-A2449FB3FB3C}","default-gray":"{0413045F-CE7E-4cc6-9D30-94DF4BF8AA9A}",cad:"{46BB95BF-8EB4-481a-A1EF-50D43FC32B9D}","examine-tilt":"{75B359F4-C1D2-4E21-BC36-F699BD1792BA}","examine-nontilt":"{0650E9E3-1999-45C1-A24F-50BBE472326B}",review:"{7F82003E-34AE-4F5A-9470-4891DC8FDFCB}"}},{create:function(t){return new(n(r,function(t,e){this.constructor.superClass.call(this,t,e,"CLSID:86A88967-7A20-11D2-8EDA-00600818EDB1","application/x-cortona",t.events)},{version:function(){if(this.isValid())return"Cortona3D Viewer "+(this.instance.Version||6)},unload:function(){this.isValid()&&(this.instance.Engine.RootNodes.Clear(),this.trigger("OnSceneUnloaded",[]))}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(0).defineClass,o=i(0).fromHTMLColor,r=i(1),s=i(5);t.exports=new(n(r,function(){this.constructor.superClass.call(this,"isoview",["HotspotHit","HotspotEnter","HotspotLeave","HotspotMenu","HotspotMenuSelect","DocumentComplete"])},{create:function(t){return new(n(s,function(t,e){this.constructor.superClass.call(this,t,e,"CLSID:865B2280-2B71-11D1-BC01-006097AC382A","application/x-isoview","isoview",["ObjectHit","ContextMenuItemHit","FileChanged"]),this._lastHotspot=""},{version:function(){if(this.isValid())return"IsoView "+this.instance.GetVersion()},getSVGSource:function(){return""},trigger:function(t,e,i){var n=t;switch(t){case"ObjectHit":0===e[0]?void 0!==e[1]?(n="HotspotEnter",e=[e[1]],this._lastHotspot=e[1]):(n="HotspotLeave",e=[this._lastHotspot],this._lastHotspot=""):(n="HotspotHit",e=[e[1],e[0]],this._lastHotspot=e[1]);break;case"ContextMenuItemHit":n="HotspotMenuSelect";break;case"FileChanged":n="DocumentComplete"}return s.prototype.trigger.call(this,n,e,i)},load:function(t){return this.isValid()&&this.instance.Iso3OpenFile(t),this},unload:function(){return this.isValid()&&this.instance.CloseFile(),this},highlight:function(t,e){return this.instance.Iso3HighlightObject("name("+t+")",4,o(e)),this},unhighlight:function(t,e){return this.instance.Iso3HighlightObject("name("+t+")",0,o(e)),this},select:function(t,e){return this.highlight(t,e),this},unselect:function(t,e){return this.unhighlight(t,e),this},reset:function(){return this.instance.GoHome(),this},scaleBy:function(t){return this}}))(this,t.container).attach()}}))},function(t,e,i){function n(t){for(var e=t.firstChild;!e.tagName;)e=e.nextSibling;return e}function o(t){var e=[],i=n(t);return"path"===i.tagName?e.push(i):e=e.concat(Array.prototype.slice.call(t.getElementsByTagName("path"))).concat(Array.prototype.slice.call(t.getElementsByTagName("text"))),e}var r=i(0).defineClass,s=i(1),a=i(2),c="http://www.w3.org/2000/svg";t.exports=new(r(s,function(){this.constructor.superClass.call(this,"svg",["HotspotHit","HotspotEnter","HotspotLeave","DocumentComplete","DocumentLoadingError","ContextMenu"])},{create:function(t){return new(r(a,function(t,e){function n(t){for(var e=t;e&&"a"!=e.nodeName.toLowerCase();)e=e.parentNode;return e}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r(t){var e="touch"===t.pointerType;if(p.length<2&&(l.setOriginBy(t.screenX-u,t.screenY-d),u=t.screenX,d=t.screenY,l.applyTransform()),e){for(var i=-1,n=0;n<p.length;n++)if(p[n].id===t.pointerId){i=n;break}if(i>=0&&(p[i].x=t.screenX,p[i].y=t.screenY,p[i].clientX=t.clientX,p[i].clientY=t.clientY),2===p.length){var r=l.view.clientWidth,s=l.view.clientHeight,a=l.getViewBoxDimensions(),c=a.w,f=a.h,m=h-o(p[0],p[1]);h=o(p[0],p[1]);var v=Math.max(l.minScale,Math.min(l.maxScale,(1-m/100)*l.zoom))/l.zoom,g=l.view.getBoundingClientRect(),_=(p[1].clientX-p[0].clientX)/2+p[0].clientX,y=(p[1].clientY-p[0].clientY)/2+p[0].clientY,b=_-g.left,T=y-g.top,w=(b-(r-c)/2-l.originX/a.scale)/l.zoom*a.scale,E=(T-(s-f)/2-l.originY/a.scale)/l.zoom*a.scale,C=l.originX+w*(1-v)*l.zoom,A=l.originY+E*(1-v)*l.zoom;v>1?l.setTransform(C,A,l.zoom*v):(l.zoom*=v,l.setOrigin(C,A),l.applyTransform())}}t.preventDefault()}function s(t){"touch"===t.pointerType&&(p=p.filter(function(e){return e.id!==t.pointerId}),h=2===p.length?o(p[0],p[1]):0,1===p.length&&(u=p[0].x,d=p[0].y)),0===t.button&&0===p.length&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",s),l.view.style.cursor="default")}this.constructor.superClass.call(this,t),i(9);var a=document.createElementNS(c,"svg");a.setAttribute("id",t.getNextId()),this.instance=a,this.view=e,e.setAttribute("touch-action","none"),this.zoom=1,this.originX=0,this.originY=0,this.maxScale=10,this.minScale=1,this.isHidden=!0,this.image=new Image;var l=this;this.image.onload=function(t){t=t||window.event;var e=l.image,i=l.instance.ownerDocument.createElementNS(c,"image");i.setAttribute("image-rendering","optimizeQuality"),i.setAttribute("width",e.width),i.setAttribute("height",e.height),l.instance.setAttribute("viewBox","0 0 "+e.width+" "+e.height),i.setAttributeNS("http://www.w3.org/1999/xlink","href",e.src),l.viewBox={x:0,y:0,width:e.width,height:e.height},l.viewport=document.createElementNS(c,"g");var n=l.viewport.transform.baseVal;n.initialize(l.instance.createSVGTransform()),n.appendItem(l.instance.createSVGTransform()),l.viewport.appendChild(i),l.instance.appendChild(l.viewport),l.trigger("DocumentComplete",{raw:[e.src],src:t}),l.isHidden||l.attach()},this.eventHandlersA={click:function(t){t=t||window.event;var e=+(t.shiftKey&&1)|+(t.ctrlKey&&2)|+(t.altKey&&4),i=n(t.target||t.srcElement),o=i?i.getAttribute("name"):"";l.trigger("HotspotHit",{raw:[o,e],src:t}),t.preventDefault()},pointerover:function(t){t=t||window.event;var e=n(t.target||t.srcElement),i=e?e.getAttribute("name"):"";l.trigger("HotspotEnter",{raw:[i],src:t}),t.preventDefault()},pointerout:function(t){t=t||window.event;var e=n(t.target||t.srcElement),i=e?e.getAttribute("name"):"";l.trigger("HotspotLeave",{raw:[i],src:t}),t.preventDefault()},contextmenu:function(t){t=t||window.event;var e=t.target||t.srcElement,i=n(e),o=i?i.getAttribute("name"):"",r=l.view.getBoundingClientRect(),s=t.clientX-r.left,a=t.clientY-r.top;return l.trigger("ContextMenu",{raw:[o,s,a],src:t}),t.preventDefault(),t.stopPropagation(),!1}};var u,d,h,p=[];this.eventHandlers={contextmenu:this.eventHandlersA.contextmenu,wheel:function(t){t=t||window.event;var e=t.deltaY<0?-10:10,i=l.view.clientWidth,n=l.view.clientHeight,o=l.getViewBoxDimensions(),r=o.w,s=o.h,a=Math.max(l.minScale,Math.min(l.maxScale,(1-e/100)*l.zoom))/l.zoom,c=l.view.getBoundingClientRect(),u=t.clientX-c.left,d=t.clientY-c.top,h=(u-(i-r)/2-l.originX/o.scale)/l.zoom*o.scale,p=(d-(n-s)/2-l.originY/o.scale)/l.zoom*o.scale,f=l.originX+h*(1-a)*l.zoom,m=l.originY+p*(1-a)*l.zoom;return a>1?l.setTransform(f,m,l.zoom*a):(l.zoom*=a,l.setOrigin(f,m),l.applyTransform()),t.preventDefault(),!1},dblclick:function(t){return p=[],l.reset(),t.preventDefault(),!1},pointerdown:function(t){t=t||window.event,"touch"===t.pointerType&&(p.push({id:t.pointerId,x:t.screenX,y:t.screenY,clientX:t.clientX,clientY:t.clientY}),h=2===p.length?o(p[0],p[1]):0),0===t.button&&p.length<2&&(u=t.screenX,d=t.screenY,document.addEventListener("pointermove",r),document.addEventListener("pointerup",s),l.view.style.cursor="move")}},this.hide(),e.appendChild(a)},{getViewBoxDimensions:function(){var t=this.view.clientWidth,e=this.view.clientHeight,i=this.viewBox.width,n=this.viewBox.height,o=t/e,r=i/n;return o>r?(n=e,i=n*r):o<r?(i=t,n=i/r):(n=e,i=t),{h:n,w:i,scale:this.viewBox.width/i}},setOriginBy:function(t,e){var i=this.getViewBoxDimensions();this.setOrigin(this.originX+t*i.scale,this.originY+e*i.scale)},setOrigin:function(t,e){var i=this.view.clientWidth,n=this.view.clientHeight,o=this.getViewBoxDimensions(),r=o.w,s=o.h,a=o.scale,c=r*this.zoom,l=s*this.zoom,u=-Math.abs(i-r)/2,d=-Math.abs(n-s)/2;this.originX=c<=i?Math.max(Math.min(t,(u+i-c)*a),u*a):Math.max(Math.min(t,u*a),(u+i-c)*a),this.originY=l<=n?Math.max(Math.min(e,(d+n-l)*a),d*a):Math.max(Math.min(e,d*a),(d+n-l)*a)},setTransform:function(t,e,i){this.originX=t,this.originY=e,this.zoom=i,this.applyTransform()},applyTransform:function(){var t=this.viewport.transform.baseVal;t.getItem(0).setTranslate(this.originX,this.originY),t.getItem(1).setScale(this.zoom,this.zoom)},getSVGSource:function(){var t=document.createElement("div");return t.appendChild(this.instance.cloneNode(!0)),t.firstChild.removeAttribute("id"),t.firstChild.removeAttribute("style"),t.innerHTML},version:function(){if(this.isValid())return"HTML5 SVG Component ver. 1.3"},attach:function(){for(var t=this,e=this.instance,i=e.getElementsByTagName("a"),n=0;n<i.length;n++)!function(e){var i=e.getAttribute("name");i||(console.log('WARNING: Element "'+e.tagName+'" has no "name" attribute. It uses text content instead'),i=e.textContent.trim(),e.setAttribute("name",i));for(var n in t.eventHandlersA)e.addEventListener(n,t.eventHandlersA[n],!1)}(i[n]);for(var o in t.eventHandlers)t.view.addEventListener(o,t.eventHandlers[o],!1);return this},detach:function(){for(var t=this,e=this.instance,i=e.getElementsByTagName("a"),n=0;n<i.length;n++){var o=i[n];for(var r in t.eventHandlers)o.removeEventListener(r,t.eventHandlers[r],!1)}for(var r in t.eventHandlers)t.view.removeEventListener(r,t.eventHandlers[r],!1);return this.zoom=1,this.originX=0,this.originY=0,this},load:function(t,e){if(e||/\.(png|jpe?g|jpe|gif)$/i.test(t)){this.detach();for(var i=this.instance;i.firstChild;)i.removeChild(i.firstChild);this.image.src=t}else{var n=new window.XMLHttpRequest;n.overrideMimeType&&n.overrideMimeType("image/svg+xml");try{var o=this;n.open("GET",t,!0),n.onerror=function(e){o.trigger("DocumentLoadingError",{raw:[t,n.status],src:e||window.event})},n.onload=function(e){if(e=e||window.event,n.responseXML){var i=document.createElement("div");i.innerHTML=n.response;var r=i.querySelector("svg");if(r){o.detach();var s=o.instance.style.cssText,a=o.instance.getAttribute("class");o.view.replaceChild(r,o.instance),o.instance=r;var l=r.getElementsByTagName("title")[0];l&&r.removeChild(l);var u=Array.prototype.slice.call(r.childNodes||r.children).filter(function(t){var e=t.nodeName;return"#text"!==e&&"title"!==e&&"defs"!==e&&"desc"!=e});o.viewport=document.createElementNS(c,"g");var d=o.viewport.transform.baseVal;d.initialize(r.createSVGTransform()),d.appendItem(r.createSVGTransform()),u.forEach(function(t){o.viewport.appendChild(t)}),r.appendChild(o.viewport),r.getAttribute("viewBox")||r.setAttribute("viewBox","0 0 "+r.getAttribute("width")+" "+r.getAttribute("height")),o.viewBox=r.getBBox(),r.style.cssText=s,r.setAttribute("class",a),o.trigger("DocumentComplete",{raw:[t],src:e}),o.isHidden||o.attach()}}},n.send(null)}catch(e){this.trigger("DocumentLoadingError",{raw:[t],src:e})}}return this},unload:function(){var t=this.instance;for(this.detach();t.firstChild;)t.removeChild(t.firstChild);return this},highlight:function(t,e){var i=this.instance;Array.prototype.slice.call(i.getElementsByTagName("a")).forEach(function(i){i.getAttribute("name")===t&&o(i).forEach(function(t){t.style.stroke=e,t.style.strokeWidth="text"===t.tagName?".1em":".5px",t.style.strokeOpacity=1})})},unhighlight:function(t,e){var i=this.instance;Array.prototype.slice.call(i.getElementsByTagName("a")).forEach(function(e){e.getAttribute("name")===t&&o(e).forEach(function(t){t.style.stroke="",t.style.strokeWidth="",t.style.strokeOpacity=""})})},select:function(t,e){var i=this.instance;Array.prototype.slice.call(i.getElementsByTagName("a")).forEach(function(i){i.getAttribute("name")===t&&o(i).forEach(function(t){t.style.fill=e,t.style.fillOpacity=1})})},unselect:function(t,e){var i=this.instance;Array.prototype.slice.call(i.getElementsByTagName("a")).forEach(function(e){e.getAttribute("name")===t&&o(e).forEach(function(t){t.style.fill="",t.style.fillOpacity=""})})},reset:function(){return this.setTransform(0,0,1),this},scaleBy:function(t){var e=this.view.clientWidth,i=this.view.clientHeight,n=this.viewBox.width,o=this.viewBox.height,r=e/i,s=n/o;r>s?(o=i*this.zoom,n=o*s):r<s?(n=e*this.zoom,o=n/s):(o=i*this.zoom,n=e*this.zoom);var a=Math.max(this.minScale,Math.min(this.maxScale,this.zoom+t)),c=(this.zoom-a)/2;return this.zoom=a,this.setOriginBy(n*c,o*c),this.applyTransform(),this},hide:function(){return this.constructor.superClass.prototype.hide.call(this),this.detach(),this.isHidden=!0,this},show:function(){return this.constructor.superClass.prototype.show.call(this),this.attach(),this.isHidden=!1,this},exists:function(t){var e=this.instance;return Array.prototype.slice.call(e.getElementsByTagName("a")).some(function(e){return e.getAttribute("name")===t})}}))(this,t.container).attach()}}))},function(t,e,i){var n=i(0).defineClass,o=i(1),r=i(2);i(45),i(46),i(47);t.exports=new(n(o,function(){this.constructor.superClass.call(this,"solo",["OnReady","OnSoloLoadComplete","OnObjectVMEnter","OnObjectVMOut","OnObjectVMMove","OnObjectVMHit","Click","DblClick","MouseDown","MouseMove","OnMouseEnter","MouseUp","OnMouseOut","OnSceneLoaded","OnSceneUnloaded","OnAnchor","OnSeekChanged"])},{create:function(t){var e=this;return t[this.type]=new(n(r,function(n,o){this.constructor.superClass.call(this,n),i(9);var r=document.createElement("div"),s="";s+='<div style="height: 100%;">',s+='<canvas oncontextmenu="event.preventDefault()" touch-action="none"></canvas>',s+='<input type="range" min="0" max="100" value="0" step="0.1" style="width:99%; margin:0 1mm; height:7mm; padding:0; position: absolute; bottom: 0;">',s+="</div>",r.innerHTML=s;var a=r.firstChild,c=a.firstChild;a.setAttribute("id",n.getNextId()),this.instance=a,this.canvas=c,this.range=c.nextSibling,this.range.style.display="none",this.canvas.style.display="none",this.hide(),o.appendChild(a);var l=[0,1,4,2],u=[1,4,2,8,16],d=function(t,e){var i,n=+(t.shiftKey&&1)|+(t.ctrlKey&&2)|+(t.altKey&&4);i=e&&void 0!==t.buttons?t.buttons:void 0!==t.which?l[t.which]:u[t.button];var o=t.target||t.srcElement,r=o.getBoundingClientRect();return[i,n,t.clientX-r.left,t.clientY-r.top]},h=function(i,n,o,r){t[e.type].trigger(i,{raw:o||[],src:n},r)},p=function(t,e){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},f=function(t,e){return!(!t||!e)&&p(t.slice(2),e.slice(2))>3},m=this,v=a.clientWidth,g=a.clientHeight;c.height=g,c.width=v,this.overObject=null;var _=null,y=navigator.userAgent.lastIndexOf("Firefox")>0,b=function(){y&&(_=document.createElement("div"),_.style.position="absolute",_.style.top="0",_.style.bottom="0",_.style.left="0",_.style.right="0",_.style.zIndex=1e4,_.onmousemove=function(t){return t=t||window.event,document.body.removeChild(t.target),_=null,t.preventDefault(),t.stopPropagation(),!1},setTimeout(function(){_&&(document.body.removeChild(_),_=null)},100),document.body.appendChild(_))};if(this.eventHandlers={webglcontextlost:function(t){alert("WebGL context lost. You will need to reload the page."),t.preventDefault()},pointermove:function(t){var e=t.target||t.srcElement,i=e.getBoundingClientRect(),n=t.clientX-i.left,o=t.clientY-i.top,r=d(t,!0),s=m.overObject?m.overObject.handle:null;if(0===r[0]){var a=m.solo.app.pickObject(n,o,m.FEATURE_PICK_TOPMOST);a&&h("OnObjectVMMove",t,[a.handle,a.name],t.target);var c=a?a.handle:null;s!==c&&(m.overObject&&(b(),h("OnObjectVMOut",t,[s,m.overObject.name],t.target)),a&&h("OnObjectVMEnter",t,[c,a.name],t.target)),m.overObject=a}else m.overObject&&(b(),h("OnObjectVMOut",t,[s,m.overObject.name],t.target),m.overObject=null);h("MouseMove",t,r)},pointerenter:function(t){_||h("OnMouseEnter",t)},pointerout:function(t){_||(m.overObject&&(h("OnObjectVMOut",t,[m.overObject.handle,m.overObject.name],t.target),m.overObject=null,b()),h("OnMouseOut",t))},pointerdown:function(t){this.lastMouseArguments=d(t),h("MouseDown",t,this.lastMouseArguments)},pointerup:function(t){var e=t.target||t.srcElement,i=e.getBoundingClientRect(),n=t.clientX-i.left,o=t.clientY-i.top,r=d(t),s=m.solo.app.pickObject(n,o,m.FEATURE_PICK_TOPMOST);f(this.lastMouseArguments,r)||s&&h("OnObjectVMHit",t,[s.handle,s.name].concat(r),t.target);var a=m.overObject?m.overObject.handle:null,c=s?s.handle:null;a!==c&&(m.overObject&&(b(),h("OnObjectVMOut",t,[a,m.overObject.name],t.target)),s&&h("OnObjectVMEnter",t,[c,s.name],t.target)),m.overObject=s,h("MouseUp",t,r),delete this.lastMouseArguments},click:function(t){h("Click",t)},dblclick:function(t){h("DblClick",t)}},!1===navigator.pointerEnabled)for(var T in this.eventHandlers)0===T.indexOf("pointer")&&(this.eventHandlers[T.replace(/^pointer/,"mouse")]=this.eventHandlers[T],delete this.eventHandlers[T]);this.attach()},{version:function(){if(this.isValid()&&this.solo)return"Cortona3D Solo ver. "+this.solo.app.version()+",  Component ver. 1.2"},attach:function(){var t,e=this.canvas;if(e)for(t in this.eventHandlers)e.addEventListener(t,this.eventHandlers[t],!1);return this},detach:function(){var t,e=this.canvas;if(e)for(t in this.eventHandlers)e.removeEventListener(t,this.eventHandlers[t],!1);this.didChangeLayout&&window.removeEventListener("resize",this.didChangeLayout,!1);try{this.solo.core.abort()}catch(t){}return this},load:function(t){var e=this,n=i(48);return n.path(i.p),n("Cortona3DSolo.js",function(){function n(t){this.name="LoadingError",this.message=t||""}var o=e.solo=window.Cortona3DSolo;if(!o||!o.app)throw n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,new n("Unable to load "+(i.p?i.p:".")+"Cortona3DSolo.js");e.trigger("OnSoloLoadComplete");var r=0;"object"==typeof window.chrome&&"win"===window.navigator.platform.substr(0,3).toLowerCase()&&(r|=o.app.DISABLE_VERTEX_ARRAY_OBJECT_OES),o.app.configureInstance(r),o.app.initialize(e.canvas,t),o.app.onReady=function(){e.trigger("OnReady")};var s;o.app.firstFrameDidArrive=function(){if(!s)return void(s=null);o.app.ui.showPanels(!0),e.defaultBackgroundColors&&o.app.setDefaultBackgroundColors(e.defaultBackgroundColors),e.trigger("OnSceneLoaded",{raw:[!0],src:s})},o.app.didFinishLoadDocument=function(t){function i(t){var i=this.value/100;e.trigger("OnSeekChanged",{raw:[i,"change"==t.type],src:t})}e.attach();var n=null===s;s=t,n&&o.app.firstFrameDidArrive.call(o.app),o.core.canvas.style.display="block",o.app.ui.showPanels(!1),e.didChangeLayout=function(){if(o.core.isRuntimeReady()){var t=e.instance,i=t.clientWidth,n=Math.max(0,t.clientHeight-e.range.offsetHeight);o.app.resize(i,n)}},window.addEventListener("resize",e.didChangeLayout,!1),e.range.value=0,e.range.addEventListener("input",i,!1),e.range.addEventListener("change",i,!1),e.didChangeLayout()},o.app.didFailLoadDocument=function(t){o.core.printErr(t),e.reason=t,e.trigger("OnSceneLoaded",{raw:[!1],src:t})}}),this},unload:function(){return this},hide:function(){this.instance&&(this.instance.style.display="none"),this.solo&&this.solo.app.ui.showPanels(!1)},show:function(){this.instance&&(this.instance.style.display="block"),this.solo&&this.solo.app.ui.showPanels(!0);var t=this.instance,e=this.canvas;return e.height=t.clientHeight,e.width=t.clientWidth,this.didChangeLayout&&this.didChangeLayout(),this},toggleRangeControl:function(t){void 0===t&&(t="none"==this.range.style.display),this.range.style.display=t?"block":"none",this.didChangeLayout&&this.didChangeLayout()}}))(this,t.container),t[this.type]}}))},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){var n,o;!function(r,s){void 0!==t&&t.exports?t.exports=s():(n=s,void 0!==(o="function"==typeof n?n.call(e,i,e,t):n)&&(t.exports=o))}(0,function(){function t(t,e){for(var i=0,n=t.length;i<n;++i)if(!e(t[i]))return c;return 1}function e(e,i){t(e,function(t){return i(t),1})}function i(r,s,a){function c(t){return t.call?t():h[t]}function u(){if(!--_){h[g]=1,v&&v();for(var i in f)t(i.split("|"),c)&&!e(f[i],c)&&(f[i]=[])}}r=r[l]?r:[r];var d=s&&s.call,v=d?s:a,g=d?r.join(""):s,_=r.length;return setTimeout(function(){e(r,function t(e,i){return null===e?u():(i||/^https?:\/\//.test(e)||!o||(e=-1===e.indexOf(".js")?o+e+".js":o+e),m[e]?(g&&(p[g]=1),2==m[e]?u():setTimeout(function(){t(e,!0)},0)):(m[e]=1,g&&(p[g]=1),void n(e,u)))})},0),i}function n(t,e){var i,n=s.createElement("script");n.onload=n.onerror=n[d]=function(){n[u]&&!/^c|loade/.test(n[u])||i||(n.onload=n[d]=null,i=1,m[t]=2,e())},n.async=1,n.src=r?t+(-1===t.indexOf("?")?"?":"&")+r:t,a.insertBefore(n,a.lastChild)}var o,r,s=document,a=s.getElementsByTagName("head")[0],c=!1,l="push",u="readyState",d="onreadystatechange",h={},p={},f={},m={};return i.get=n,i.order=function(t,e,n){!function o(r){r=t.shift(),t.length?i(r,o):i(r,e,n)}()},i.path=function(t){o=t},i.urlArgs=function(t){r=t},i.ready=function(n,o,r){n=n[l]?n:[n];var s=[];return!e(n,function(t){h[t]||s[l](t)})&&t(n,function(t){return h[t]})?o():function(t){f[t]=f[t]||[],f[t][l](o),r&&r(s)}(n.join("|")),i},i.done=function(t){i([null],t)},i})},function(t,e,i){i(50),i(51),i(52),i(53),i(54),i(55),i(56),i(57),i(58),t.exports=i(60)},function(t,e,i){t.exports=i.p+"../vme2ietp.xsl"},function(t,e,i){t.exports=i.p+"../vme2ietp-document.xsl"},function(t,e,i){t.exports=i.p+"../s1000d-document.xsl"},function(t,e,i){t.exports=i.p+"../s1000d-proced-to-html-base.xsl"},function(t,e){},function(t,e){},function(t,e,i){t.exports=i.p+"../adjustColumnWidths.xsl"},function(t,e,i){t.exports=i.p+"../table-to-html.xsl"},function(t,e,i){document.addEventListener("DOMContentLoaded",function(){window.Cortona3DSolo={config:i(59)},document.body.onload=function(){window.Cortona3DSolo.config.TOTAL_MEMORY=Math.max(16777216,1024*cortona3d.app.data.options.TotalMemory*1024),cortona3d.app.onLoad()},document.body.onbeforeunload=cortona3d.app.onUnload,window.onerror=function(t,e,i,n,o){cortona3d.app.error.call(null,t,e,i,n,o||new Error(t))}},!1)},function(t,e,i){t.exports={locateFile:function(t){return i.p+t},TOTAL_MEMORY:window&&window.TOTAL_MEMORY||134217728}},function(t,e,i){var n=i(0).expand;t.exports=i(61),t.exports=n(t.exports,{mixins:{injectLangCSS:function(){var t=document.createElement("link"),e=this.langDoc.toLowerCase()||"en";"sx"===e&&(e="en"),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",this.resFolder+"s1000d_"+e+".css"),document.head.appendChild(t)},alertMessage:function(t){var e=t.id.split("-")[0].toUpperCase(),i=this.factory.alertType[e]||0;this.message(i,"",document.getElementById(t.info)).show()}}})},function(t,e,i){function n(){z.length=0}function o(){z.length?(D.api.vcr_pause(),Y.alertMessage.call(D.scene.alert,z.shift())):D.api.vcr_play()}function r(t){t&&z.push(t)}function s(){}function a(){cortona3d.loadSpecIDCSS(G.resFolder+""+G.specID.toLowerCase(),c)}function c(){function t(t,e){return document.getElementById(t)?document.getElementById(t).checked:!!e}function e(){D.scene&&D.scene.popupmenu&&D.scene.popupmenu.close(),L.scene&&L.scene.popupmenu&&L.scene.popupmenu.close()}i.p=(G.publicFolder||G.resFolder||".").replace(/\/+$/,"")+"/";for(var s in G.options)/^(Yes|No)$/.test(G.options[s])&&(G.options[s]="Yes"==G.options[s]);if(!/(trident|msie)/gi.test(window.navigator.userAgent.toLowerCase())&&G.options.UsePlugins)return G.TXT_IE_REQUIRED?document.writeln("<pre>"+G.TXT_IE_REQUIRED+"</pre>"):document.writeln("<pre>This publication uses plugins which work only in Internet Explorer.</pre>"),void document.close();Y.injectLangCSS.call(G),G.options.SelectedFrameColor&&(document.head.appendChild(document.createElement("style")).innerHTML=".play-context { border-left-color: "+G.options.SelectedFrameColor+" !important; }"),V=new(cortona3d.defineClass(cortona3d.interfaces.ProcedureView,function(){this.constructor.superClass.apply(this,arguments)},{setTitle:function(t,e,i,n,o){var r=document.getElementById("app-figure-title");r.innerHTML=t||"&nbsp;",r.className=e||"",r.setAttribute("data-index",i||""),r.setAttribute("data-subindex",n||""),r.setAttribute("data-subindexes",o||"")}}))(G),V.addFigureView(new cortona3d.interfaces.FigureView({close:function(){L.hide(),D.hide(),V.maximized()},help:function(){try{V.viewFigure.helpWindow.close()}catch(t){}V.viewFigure.helpWindow=window.open(G.resFolder+G.helpFile,"","statusbar=no,resizable=yes,scrollbars=yes,width=750,height=600")},play:function(){D.api&&D.api.vcr_play()},stop:function(){D.api&&D.api.vcr_stop()},pause:function(){D.api&&D.api.vcr_pause()},next:function(){if(H&&H.parent)for(var t=H.parent.children,e=0;t.length;e++)if(t[e]==H){if(e<t.length-1){var i=E(t[e+1].id);i&&V.viewDocument.handlers.link3d.call(i)}return}},prev:function(){if(H&&H.parent)for(var t=H.parent.children,e=0;t.length;e++)if(t[e]==H){if(e>0){var i=E(t[e-1].id);i&&V.viewDocument.handlers.link3d.call(i)}return}},autostop:function(){D.api&&D.api.set_autostop_mode(this.checked?B?2:1:0)}})),V.addDocumentView(new cortona3d.interfaces.DocumentView({link3d:function(){var t=G.propSceneName;if(M.hide(),L.hide(),D.load(t),D.loaded){var e=this.getAttribute("data-key"),i=this.getAttribute("data-title")||this.getAttribute("title")||"",n=(this.getAttribute("data-context")||"step").toLowerCase(),o=Y.getAutoplay.call(this);switch(V.setTitle(i,this.className,this.getAttribute("data-figure"),this.getAttribute("data-sheet"),this.getAttribute("data-sheets")),n){case"part":case"item":D.locate3DObjects(e);break;default:D.simulate(e,o)}}else V.viewDocument.link3dNode=this;return!1},link2d:function(){var t=this.getAttribute("data-src");if(!V.viewDocument.checkGraphicStateAfterFilter(t))return void alert("Referenced graphic is hide. Switch applic filter");var e=this.getAttribute("data-title")||this.getAttribute("title")||"",i=this.getAttribute("data-referredFragment"),n=this.getAttribute("data-figure"),o="true"===(this.getAttribute("data-linkByName")||"true");if(V.setTitle(e,this.className,n,this.getAttribute("data-sheet"),this.getAttribute("data-sheets")),D.hide(),M.hide(),o&&L.loaded&&n===L.figureNumber&&L.hotspotExists(i))V.content.classList.contains("app-switch-2d")||L.clearSelection(),L.show(),L.selectHotspot(i),L.control.reset();else{var r=b(t);L.load(r),L.figureNumber=n,L.loaded?(L.selectHotspot(i),L.control.reset()):V.viewDocument.link2dNode=this}return!1},linkMedia:function(){var t=this.getAttribute("data-src"),e=this.getAttribute("data-title")||this.getAttribute("title")||"";V.setTitle(e,this.className,this.getAttribute("data-figure"),this.getAttribute("data-sheet"),this.getAttribute("data-sheets"));var i=b(t);D.hide(),L.hide(),M.load(i),M.loaded||(V.viewDocument.link1dNode=this)},toggleStatus:function(){var t=this.getElementsByClassName("dmStatus");return t.length&&(t[0].style.display="block"!==t[0].style.display?"block":"none"),!1}}),document.getElementById("pre-rendered-document").children[0]),M=new(cortona3d.defineClass(U,function(){this.constructor.superClass.call(this,"1d",V)},{setup:function(){this.constructor.superClass.prototype.setup.call(this,["iframe"],cortona3d.factory)},load:function(t){this.constructor.superClass.prototype.load.call(this,t),this.loaded=!0},eventsHandler:function(t){switch(t.type){case"DocumentComplete":M.scene.loading.hide(),M.control.show(),M.loaded=!0,V.viewDocument.link1dNode&&V.viewDocument.handlers.linkMedia.call(V.viewDocument.link1dNode)}t.type,t.target.id||t.target.localName,t.detail.raw.map(function(t){if(t&&void 0!==t.toString)return t.toString();switch(typeof t){case"string":case"number":case"boolean":return t;default:return typeof t}});return!0}})),L=new(cortona3d.defineClass(U,function(){this.constructor.superClass.call(this,"2d",V)},{hide:function(){this.isValid()&&(this.scene.popupmenu&&this.scene.popupmenu.hide(),this.constructor.superClass.prototype.hide.call(this))},setup:function(t){if(this.isValid()){if(this.constructor.superClass.prototype.setup.call(this,t,cortona3d.factory),!this.control){var e=this.prefix.toUpperCase()+" "+G.TXT_VIEWER_UNAVAILABLE;cortona3d.app.error(e,"","","",new(cortona3d.defineClass(Error,function(t,e){this.name="FigureInitializingError",this.message=t||"",this.figure=e},{}))(e,this))}this.contextMenuTemplate=[{description:G.TXT_CMENU_VIEWER2D_ZOOMIN||"Zoom In",action:function(){L.control.scaleBy(.1)}},{description:G.TXT_CMENU_VIEWER2D_ZOOMOUT||"Zoom Out",action:function(){L.control.scaleBy(-.1)}},null,{description:G.TXT_CMENU_VIEWER2D_BESTFIT||"Best Fit",action:function(){L.control.reset()}},null,{description:G.TXT_CMENU_ABOUT||"About",action:g}],this.scene.add(cortona3d.factory.popupmenu.setMenuTemplate(this.contextMenuTemplate))}},load:function(t){if(this.isValid()){switch(this.control.factory.type){case"isoview":this.control.instance.ConfigEvents(32);try{parseInt(this.control.instance.GetVersion().substr(0,1),10)>=6&&this.control.instance.ConfigTools2(1,39,1,!1,!1),this.control.instance.Iso4SetPreference("use_default_printer",0)}catch(t){}this.control.instance.AcceptDroppedFiles=!1,this.control.instance.Iso3SetObjectTipStyle("Arial",8,0,1,1,1e3),this.control.instance.ResizeToFit=!0;break;case"viewer2d":void 0!==G.langID&&(this.control.instance.LangID=G.langID);break;case"svg":t=t.replace(/\.(cgm|tif{1,2})$/i,".svg")}this.constructor.superClass.prototype.load.call(this,t)}},eventsHandler:function(t){switch(t.type){case"ContextMenu":var e=t.detail.raw[1],i=t.detail.raw[2];L.scene.popupmenu.setPosition(e,i).show();break;case"DocumentComplete":L.scene.loading.hide(),L.control.show(),L.loaded=!0,V.viewDocument.link2dNode&&V.viewDocument.handlers.link2d.call(V.viewDocument.link2dNode);break;case"DocumentLoadingError":var n="Failed to loading image "+t.detail.raw[0]+".";void 0!==t.detail.raw[1]?n+=" XHR Status: "+t.detail.raw[1]:t.detail.src instanceof Error&&(n+=" Reason: "+t.detail.src.message),L.scene.loading.hide(),cortona3d.app.error(n,"","","",new(cortona3d.defineClass(Error,function(t,e){this.name="FigureLoadingError",this.message=t||"",this.figure=e},{}))(n,L));break;case"HotspotEnter":L.control.highlight(t.detail.raw[0],G.options.SelectedFrameColor);break;case"HotspotLeave":L.control.unhighlight(t.detail.raw[0]);break;case"HotspotHit":L.clearSelection()}t.type,t.target.id||t.target.localName,t.detail.raw.map(function(t){if(t&&void 0!==t.toString)return t.toString();switch(typeof t){case"string":case"number":case"boolean":return t;default:return typeof t}});return!0},selectHotspot:function(t){this.isValid()&&(this.activeHotspot&&L.control.unselect(this.activeHotspot),t!=this.activeHotspot?(this.activeHotspot=t,L.control.select(t,G.options.SelectedHotspotColor)):delete this.activeHotspot)},clearSelection:function(){this.isValid()&&this.activeHotspot&&(L.control.unselect(this.activeHotspot),delete this.activeHotspot)},hotspotExists:function(t){return L.control.exists(t)}})),D=new(cortona3d.defineClass(U,function(){this.constructor.superClass.call(this,"3d",V)},{hide:function(){this.isValid()&&(this.api&&this.api.vcr_pause(),V.viewDocument.unhighlight(),w(),this.scene.alert&&this.scene.alert.hide(),this.scene.popupmenu&&this.scene.popupmenu.hide(),this.constructor.superClass.prototype.hide.call(this))},load:function(t){this.isValid()&&".wrl"!=t&&("solo"==this.control.factory.type&&(t=G.propInteractivityName),this.constructor.superClass.prototype.load.call(this,t))},setup:function(t){if(this.isValid()){if(this.constructor.superClass.prototype.setup.call(this,t,cortona3d.factory),!this.control){var e=this.prefix.toUpperCase()+" "+G.TXT_VIEWER_UNAVAILABLE;return void cortona3d.app.error(e,"","","",new(cortona3d.defineClass(Error,function(t,e){this.name="FigureInitializingError",this.message=t||"",this.figure=e},{}))(e,this))}var n=this.eventsHandler,o=this.scene.container;i(63),this.scene.add(cortona3d.factory.alert),this.scene.alert.factory.events.forEach(function(t){o.addEventListener(t,n,!1)}),this.contextMenuTemplate=[],this.contextMenuTemplate.push({description:G.TXT_CMENU_CORTONA_PROPERTIES,action:D.scene.viewer3d?function(){D.scene.viewer3d.instance.uiAction("preferences")}:null}),!G.options.UsePlugins&&G.options.FPS&&this.contextMenuTemplate.push({description:G.showFPS,action:_}),this.contextMenuTemplate.push(null),this.contextMenuTemplate.push({description:G.TXT_CMENU_ABOUT,action:g}),this.scene.add(cortona3d.factory.popupmenu.setMenuTemplate(this.contextMenuTemplate));var r=G.options.Background3DColor,s=G.options.ToolbarBackgroundColor||r;if(this.control.defaultBackgroundColors=[r,s],"viewer3d"==this.control.factory.type){var a={BackColor:cortona3d.fromHTMLColor(r),GradientBackColor:cortona3d.fromHTMLColor(s),Skin:D.control.factory.skins.review,ConsoleMode:0,ContextMenu:!1,ShowLogo:!1,LoadDroppedScene:!1,HeadLight:!0,NavigationBar:0,RendererHints:5168,RendererOptimization:0,TravelSpeed:2,viewpoint_transition_mode:0,WaitForAllResources:!0,PixelBufferAccess:!0,MuteSound:2};G.options.forceDirectX&&(a.RendererName="DirectX Renderer"),cortona3d.expand(this.control.instance,a);var c=this.control.instance;if(c.uiAction("revokePropPage:{E5711FD5-464F-11D3-9D7D-00A0247A5F3F}"),c.uiAction("revokePropPage:{EC48A005-4978-11D3-9D7E-00A0247A5F3F}"),c.uiAction("revokePropPage:{E5711FD4-464F-11D3-9D7D-00A0247A5F3F}"),(parseInt(c.Version)||6)<8)return this.scene.add(cortona3d.factory.error),this.control=this.scene.error,void this.control.message(G.TXT_WARNING_CORTONA_OLD_VERSION)}this.api_initialize()}},eventsHandler:function(e){function i(){}switch(e.type){case"OnReady":D.control.solo.core.printErr;D.control.solo.core.printErr=function(){var t=Array.prototype.slice.call(arguments).join("");alert(t),D.control.solo.core.printErr=i},D.control.solo.core.setStatus=i;break;case"OnSceneLoaded":D.scene.loading.hide(),e.detail.raw[0]?(G.options.ForceFPS&&(D.scene.add(cortona3d.factory.fps),D.scene.fps.show()),D.loaded=!0,D.control.show(),V.viewFigure.enableControlsGroup(),V.viewDocument.link3dNode&&V.viewDocument.handlers.link3d.call(V.viewDocument.link3dNode)):(delete D.url,D.control.reason&&(D.scene.add(cortona3d.factory.error),D.scene.error.message(D.control.reason)));break;case"MouseDown":D.mouseButton=e.detail.raw[0],D.scene.popupmenu.hide();break;case"MouseUp":var r=e.detail.raw[2],s=e.detail.raw[3];2==D.mouseButton&&(!G.options.UsePlugins&&G.options.FPS&&(D.contextMenuTemplate[D.contextMenuTemplate.length-3].description=D.scene.fps?G.hideFPS:G.showFPS,D.scene.remove(cortona3d.factory.popupmenu),D.scene.add(cortona3d.factory.popupmenu.setMenuTemplate(D.contextMenuTemplate))),D.scene.popupmenu.setPosition(r,s).show(),window.focus());break;case"OnObjectVMMove":case"MouseMove":case"OnFrameRateMeasured":case"OnCameraMove":return!0;case"OnAlertActivated":D.scene.popupmenu.hide(),V.viewFigure.disableControlsGroup(),D.scene.viewer3d&&(D.scene.viewer3d.instance.InputDevices=0);break;case"OnAlertDismiss":V.viewFigure.enableControlsGroup(),D.scene.viewer3d&&(D.scene.viewer3d.instance.InputDevices=255);break;case"OnAlertClosed":t("enable-notes",!0)||n(),o()}e.type,e.target.id||e.target.localName,e.detail.raw.map(function(t){if(t&&void 0!==t.toString)return t.toString();switch(typeof t){case"string":case"number":case"boolean":return t;default:return typeof t}});return!0},seekEventHandler:function(t){var e=(this.value-this.min)/(this.max-this.min);setTimeout(function(){D.api.vcr_set_seek_position(e,"change"==t.type)},0)},api_initialize:function(){if(this.isValid()){this.api=new cortona3d.interfaces[D.control.factory.type].SimulationAPI(D.control);cortona3d.expand(this.api,{on_simulation_load:function(t){if(t){var e=document.getElementById("seek");e&&(e.value=0,G.simulation_steps.length>1?(e.addEventListener("input",D.seekEventHandler,!1),e.addEventListener("change",D.seekEventHandler,!1)):e.max=e.min);var i=document.getElementById("vpfreeze");i&&(i.onclick=function(){D.api.set_freeze_viewpoint(this.checked)});var n=document.getElementById("speed-selector");n&&(n.onchange=function(){D.api.set_speed_ratio(this.value)}),D.api.set_ui_axis(!0),D.api.set_ui_zoom(!1),D.api.set_ui_vcr(!1),D.api.set_ui_smoothcontrol(!1),y(),G.options.StartAfterLoading&&D.simulate(G.simulation_steps[0],!0)}},on_vcr_state:function(e){D.api.state!==e&&p(),V.viewFigure.onVCRControlStateChanged(e);var i=t("autostopbox");i&&e===D.api.PAUSE&&(1==D.api.vcr_get_step_fraction()?D.api.vcr_next_step():B&&1==D.api.vcr_get_fraction()&&D.api.vcr_next_substep()),G.options.AutoRepeat&&D.api.state===D.api.PLAY&&e!==D.api.PLAY&&!i&&1==D.api.vcr_get_fraction()&&D.play()},on_events_out:function(e){if(t("enable-notes",!0)){if(e.length>0){for(var i=0;i<e.length;i++)r(Y.getPushNoteEvent.call(G,e[i]));o()}}else n()},on_start_new_substep:function(t,e,i){if(H){for(var n=null,o=h(i),r=Y.getDocumentId.call(G,o.parent.id),s=1===G.typeHLight;o&&o.parent&&!n;){if(r&&document.getElementById(r)){n=document.getElementById(r);break}if(!s||!o.parent.parent)break;o=o.parent}j!==n&&(V.viewDocument.unhighlight(),n&&V.viewDocument.setActiveNode(r,!0).highlight())}},on_seek_position_changed:function(t){var e=document.getElementById("seek");if(e){var i=parseFloat(e.min),n=parseFloat(e.max),o=t*(n-i)+i;setTimeout(function(){e.value=o},0)}}})}},simulate:function(t,e){if(this.isValid()){h(t)||(t=G.simulation_steps[0]);var i=d(t);i.length>0&&(D.api.vcr_set_range(i[0],i[i.length-1]),D.api.vcr_stop()),w(),H=h(t),T(),V.viewDocument.highlight(),p(),(e||null===e&&G.options.StartAfterNavigate)&&D.api.vcr_play()}},fit3D:function(t){this.isValid()&&D.api&&(-1==t.indexOf(" ")?D.api.fit_to_object(t):D.api.fit_to_objects(t.split(" ")))},flash3D:function(t){this.isValid()&&D.api&&(-1==t.indexOf(" ")?D.api.flash_node(t):D.api.flash_nodes(t.split(" ")))},locate3DObjects:function(t){this.isValid()&&(this.fit3D(t),setTimeout(function(){D.flash3D(t)},750))},play:function(){this.isValid()&&setTimeout(function(){D.api.vcr_play()},750)}}));var a=i(64)(G);D.setup(a.viewer3D),L.setup(a.viewer2D),M.setup(),window.onblur=e,window.onmousedown=e,window.onkeydown=e,window.onresize=function(){D.scene&&D.scene.popupmenu&&D.scene.popupmenu.hide(),L.scene&&L.scene.popupmenu&&L.scene.popupmenu.hide(),D.scene&&D.scene.alert&&D.scene.alert.onresize()},l(G.simulation_steps),G.options.StartAfterLoading&&(M.hide(),L.hide(),D.load(G.propSceneName)),V.content.classList.add("bounce"),setTimeout(function(){V.content.classList.remove("bounce")},0)}function l(t){X=[],t&&t.length>0&&u(t,null)}function u(t,e){var i={id:t[0],parent:e,children:[],actions:[],isAction:!1};X.push(i);for(var n=1;n<t.length;n++)if("string"==typeof t[n]){var o={id:t[n],parent:i,children:[],actions:[t[n]],isAction:!0};X.push(o),i.children.push(o),i.actions.push(t[n])}else{var r=u(t[n],i);i.children.push(r),i.actions=i.actions.concat(r.actions)}return i}function d(t){var e=[];if(t){var i=h(t);i&&(e=i.actions)}return e}function h(t){for(var e=0;e<X.length;e++)if(X[e].id==t)return X[e];return null}function p(){if(H&&H.parent)for(var t=H.parent.children,e=0;t.length;e++)if(t[e]==H)return f(e>0),void m(e<t.length-1);f(!1),m(!1)}function f(t){var e=document.getElementById("btn_prev");e&&(e.disabled=!t)}function m(t){var e=document.getElementById("btn_next");e&&(e.disabled=!t)}function v(){var t=G.TXT_PUBLISHER_VERSION||G.exporterVersionNumber||"1.14.0.245";return G.specVer&&(t+="-"+G.specVer),t+="-"+R,G.specLang&&(t+=" ("+G.specLang+")"),t}function g(){var t="";D.control&&D.control.version()&&(t+="\n"+G.aboutCortonaVersion+" "+D.control.version()),L.control&&L.control.version()&&(t+="\n"+G.aboutCgmViewerVersion+" "+L.control.version()),alert(G.aboutDocumentVersion+" "+v()+t)}function _(){var t=D.scene;t.fps?t.remove(t.fps):(t.add(cortona3d.factory.fps),t.fps.show())}function y(){try{k.nav_roll=!G.options.UpRight,k.align=!G.options.UpRight;for(var t,e=D.control.instance,i=[],n=e.Engine.Nodes.Item("_SKIN_INFO"),o=n.Fields.Item("info"),r=0;r<o.Count;r++)for(t in k)if(o.GetValue(r).indexOf(t+"=")>=0){o.SetValue(r,t+"="+k[t]),i.push(t);break}for(t in k){var s=!1;for(var a in i)a==t&&(s=!0);s||o.Add(t+"="+k[t])}}catch(t){}}function b(t){var e=location.protocol+"//"+location.host,i=location.pathname.replace(/[^\/]+$/,"");return t&&-1===t.indexOf("://")&&(t="/"===t.charAt(0)?e+t:e+i+t),t}function T(){if(H){var t=document.getElementById(Y.getDocumentId.call(G,H.id));t&&t.classList.add("play-context")}}function w(){if(H){var t=document.getElementById(Y.getDocumentId.call(G,H.id));t&&t.classList.remove("play-context")}}function E(t){for(var e=null,i=document.getElementsByClassName("link3d"),n=0;n<i.length;n++)if(i[n].getAttribute("data-key")===t){e=i[n];break}return e}function C(){for(var t=document.querySelectorAll("input[data-correct]"),e=0;e<t.length;e++){var i=t[e];"radio"!=i.type&&"checkbox"!=i.type||(i.checked=!0),"text"==i.type&&(i.value=i.getAttribute("data-correct"))}for(var n=document.querySelectorAll(".orderItem"),e=0;e<n.length;e++)n[e].addEventListener("click",N)}function A(){W&&(W.classList.remove("select"),W=null),S()}function S(){for(var t=document.querySelectorAll(".control input.up, .control input.down"),e=0;e<t.length;e++)t[e].disabled=!0}function I(t){for(var e=[];t.previousElementSibling;)e.push(t.previousElementSibling),t=t.previousElementSibling;return e}function F(t){var e=t.cloneNode(!0);return t.parentElement.replaceChild(e,t),t=null,e}function O(t,e){for(;t&&!t.classList.contains("highlightAnswer");)t=t.parentElement;t&&("remove"==e?(t.classList.remove("correct"),t.classList.remove("wrong")):"correct"==e?t.classList.add("correct"):"wrong"==e&&t.classList.add("wrong"))}function x(t,e){if(t!==e){var i=document.createElement("div");t.parentElement.replaceChild(i,t),e.parentElement.replaceChild(t,e),i.parentElement.replaceChild(e,i),i=null}}function P(t){var e;try{e=new Event("click")}catch(t){e=document.createEvent("Event"),e.initEvent("click",!0,!0)}t.dispatchEvent(e)}function N(){A(),W=this;var t=I(W).length;W.classList.add("select");for(var e=W;!e.classList.contains("assessmentQuestion");)if(!(e=e.parentElement))return;var i=e.querySelectorAll(".control"),n=(i.item(t).querySelectorAll("input"),i.item(t).querySelector("input.up")),o=i.item(t).querySelector("input.down");n=F(n),o=F(o),n.disabled=!0,o.disabled=!0,W.parentElement.previousElementSibling&&(n.disabled=!1,n.addEventListener("click",function(){var e=W.parentElement.previousElementSibling.children.item(t);O(W,"remove"),O(e,"remove"),x(W,e),P(W)})),W.parentElement.nextElementSibling&&(o.disabled=!1,o.addEventListener("click",function(){var e=W.parentElement.nextElementSibling.children.item(t);O(W,"remove"),O(e,"remove"),x(W,e),P(W)}))}var V,M,L,D,R="2.00",B=!1,k={spin:!0,pan:!0,zoom:!0,fit:!1,setcenter:!0,skipsensors:!0,nav_roll:!0,align:!0},H=null,X=[],j=null,z=[],U=i(62),Y={injectLangCSS:function(){},getAutoplay:function(){var t=this.getAttribute("data-autoplay");return null!==t&&(t=1==t),t},alertMessage:function(t){var e=t.id.split("-")[0].toUpperCase(),i=this.factory.alertType[e]||0;this.message(i,"",t.info).show()},getPushNoteEvent:function(t){if(/(CAUTION|WARNING)/.test(t.id))return t},getDocumentId:function(t){return t}},G={};t.exports={mixins:Y,data:G,error:function(t,e,i,n,o){if("TiramisuLoadingError"==o.name?o.figure=D:"FigureLoadingError"==o.name||o.figure||(o.figure=D),o.figure){o.figure.scene.error&&o.figure.scene.remove(cortona3d.factory.error),o.figure.scene.add(cortona3d.factory.error),o.figure.control=o.figure.scene.error;var r=[G.TXT_OOPS_IDIDITAGAIN,"Figure"+o.figure.prefix.toUpperCase()+": "+t];(e||i||n)&&r.push(e+" ("+i+"/"+n+")"),o.figure.control.message.apply(o.figure.control,r).show(),o.figure.scene.loading.hide()}},onLoad:a,onUnload:s,figure1D:M,figure2D:L,figure3D:D,procedureApp:V},window.addEventListener("load",C);var W},function(t,e,i){var n=i(0).defineClass,o=n(null,function(t,e){this.procedureApp=e,this.prefix=t,this.scene=this.procedureApp.viewFigure.getScene(t)},{isValid:function(){return!!this.scene},eventsHandler:function(){return!1},setup:function(t,e){if(this.isValid()){for(this.scene.add(e.loading);t.length>0&&(this.scene.add(e[t[0]]),!this.scene[t[0]].isValid());t.shift())this.scene.remove(e[t[0]]);if(t.length>0){this.control=this.scene[t[0]];var i=this.scene.container,n=this.eventsHandler;e[t[0]].events.forEach(function(t){i.addEventListener(t,n,!1)})}}},show:function(){this.isValid()&&(this.procedureApp.showFigure(this.prefix),this.control.show())},hide:function(){this.isValid()&&this.control.hide()},loaded:!1,load:function(t){if(this.isValid()){var e="error"==this.control.factory.type,i=this.url!==t;if(!e&&i){this.scene.loading.show(),this.url=t,this.loaded=!1,this.control.hide();try{this.control.load(t)}catch(t){cortona3d.app.error(t.message,"","","",new(n(Error,function(t,e){this.name="FigureInitializingError",this.message=t||"",this.figure=e},{}))(t.message,this))}}else this.control.show(),this.scene.loading.hide();this.procedureApp.showFigure(this.prefix)}}});t.exports=o},function(t,e){},function(t,e){t.exports=function(t){var e={viewer2D:t.options.UsePlugins?["viewer2d","isoview"]:["svg","iframe"],viewer3D:t.options.UsePlugins?["viewer3d"]:["solo"]};return void 0!==t.options.Viewer2DType&&(e.viewer2D={0:["viewer2d","isoview","svg","iframe"],1:["viewer2d"],2:["isoview"],3:["svg"],4:["iframe"]}[t.options.Viewer2DType]),void 0!==t.options.Viewer3D&&(e.viewer3D={auto:["viewer3d","solo"],viewer3d:["viewer3d"],solo:["solo"],x3dom:["x3d"]}[t.options.Viewer3D]),e}}]);